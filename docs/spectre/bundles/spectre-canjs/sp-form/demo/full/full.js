define("spectre-canjs@2.3.0#sp-file-list/sp-file-list.stache!steal-stache@4.1.0#steal-stache",["module","can-stache","can-stache/src/mustache_core","can-view-import@4.0.2#can-view-import","can-stache-bindings@4.1.0#can-stache-bindings"],function(e,t,n){var r=t("sp-file-list/sp-file-list.stache",[{tokenType:"special",args:["#if(files.length)",1]},{tokenType:"chars",args:["\r\n",1]},{tokenType:"special",args:["#each(files, file=value)",2]},{tokenType:"chars",args:["\r\n",2]},{tokenType:"start",args:["div",!1,3]},{tokenType:"attrStart",args:["class",3]},{tokenType:"attrValue",args:["tile",3]},{tokenType:"attrEnd",args:["class",3]},{tokenType:"end",args:["div",!1,3]},{tokenType:"chars",args:["\r\n    ",3]},{tokenType:"start",args:["div",!1,4]},{tokenType:"attrStart",args:["class",4]},{tokenType:"attrValue",args:["tile-icon",4]},{tokenType:"attrEnd",args:["class",4]},{tokenType:"end",args:["div",!1,4]},{tokenType:"chars",args:["\r\n    ",4]},{tokenType:"special",args:["#if(scope.root.isImage(file))",5]},{tokenType:"chars",args:["\r\n    ",5]},{tokenType:"start",args:["figure",!1,6]},{tokenType:"attrStart",args:["class",6]},{tokenType:"attrValue",args:["avatar avatar-lg",6]},{tokenType:"attrEnd",args:["class",6]},{tokenType:"end",args:["figure",!1,6]},{tokenType:"chars",args:["\r\n        ",6]},{tokenType:"start",args:["img",!0,7]},{tokenType:"attrStart",args:["src",7]},{tokenType:"special",args:["file.uri",7]},{tokenType:"attrEnd",args:["src",7]},{tokenType:"attrStart",args:["alt",7]},{tokenType:"attrValue",args:["Upload",7]},{tokenType:"attrEnd",args:["alt",7]},{tokenType:"end",args:["img",!0,7]},{tokenType:"chars",args:["\r\n    ",7]},{tokenType:"close",args:["figure",8]},{tokenType:"chars",args:["\r\n    ",8]},{tokenType:"special",args:["else",9]},{tokenType:"chars",args:["\r\n        ",9]},{tokenType:"start",args:["i",!1,10]},{tokenType:"attrStart",args:["class",10]},{tokenType:"attrValue",args:["fa fa-3x fa-file",10]},{tokenType:"attrEnd",args:["class",10]},{tokenType:"end",args:["i",!1,10]},{tokenType:"close",args:["i",10]},{tokenType:"chars",args:["\r\n    ",10]},{tokenType:"special",args:["/if",11]},{tokenType:"chars",args:["\r\n    ",11]},{tokenType:"close",args:["div",12]},{tokenType:"chars",args:["\r\n    ",12]},{tokenType:"start",args:["div",!1,13]},{tokenType:"attrStart",args:["class",13]},{tokenType:"attrValue",args:["tile-content",13]},{tokenType:"attrEnd",args:["class",13]},{tokenType:"end",args:["div",!1,13]},{tokenType:"chars",args:["\r\n    ",13]},{tokenType:"start",args:["p",!1,14]},{tokenType:"attrStart",args:["class",14]},{tokenType:"attrValue",args:["tile-subtitle text-gray text-ellipsis",14]},{tokenType:"attrEnd",args:["class",14]},{tokenType:"end",args:["p",!1,14]},{tokenType:"special",args:["file.id",14]},{tokenType:"close",args:["p",14]},{tokenType:"chars",args:["\r\n    ",14]},{tokenType:"close",args:["div",15]},{tokenType:"chars",args:["\r\n    ",15]},{tokenType:"start",args:["div",!1,16]},{tokenType:"attrStart",args:["class",16]},{tokenType:"attrValue",args:["tile-action",16]},{tokenType:"attrEnd",args:["class",16]},{tokenType:"end",args:["div",!1,16]},{tokenType:"chars",args:["\r\n        ",16]},{tokenType:"start",args:["can-slot",!1,17]},{tokenType:"attrStart",args:["name",17]},{tokenType:"attrValue",args:["actions",17]},{tokenType:"attrEnd",args:["name",17]},{tokenType:"attrStart",args:["file:bind",17]},{tokenType:"attrValue",args:["file",17]},{tokenType:"attrEnd",args:["file:bind",17]},{tokenType:"end",args:["can-slot",!1,17]},{tokenType:"close",args:["can-slot",17]},{tokenType:"chars",args:["\r\n    ",17]},{tokenType:"close",args:["div",18]},{tokenType:"chars",args:["\r\n",18]},{tokenType:"close",args:["div",19]},{tokenType:"chars",args:["\r\n",19]},{tokenType:"start",args:["div",!1,20]},{tokenType:"attrStart",args:["class",20]},{tokenType:"attrValue",args:["divider",20]},{tokenType:"attrEnd",args:["class",20]},{tokenType:"end",args:["div",!1,20]},{tokenType:"close",args:["div",20]},{tokenType:"chars",args:["\r\n",20]},{tokenType:"special",args:["/each",21]},{tokenType:"chars",args:["\r\n",21]},{tokenType:"special",args:["/if",22]},{tokenType:"done",args:[22]}]);return function(t,n,a){var i=Object.assign({module:e},n);return r(t,i,a)}}),define("spectre-canjs@2.3.0#sp-file-list/ViewModel",["exports","can-define/map/map","can-define/list/list"],function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.img=void 0;var a=r(t),i=r(n),s=e.img=new RegExp(/.*\.(?:jpg|jpeg|gif|png)/,"i");e.default=a.default.extend("SPFileList",{files:i.default,isImage:function(e){return s.test(e.id)}})}),define("spectre-canjs@2.3.0#sp-file-list/sp-file-list",["exports","can-component","./sp-file-list.stache","./ViewModel","./sp-file-list.less"],function(e,t,n,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(t),s=a(n),o=a(r);e.default=i.default.extend({tag:"sp-file-list",ViewModel:o.default,view:s.default})}),define("spectre-canjs@2.3.0#sp-form/fields/sp-dropzone-field/sp-dropzone-field.stache!steal-stache@4.1.0#steal-stache",["module","can-stache","can-stache/src/mustache_core","can-view-import@4.0.2#can-view-import","can-stache-bindings@4.1.0#can-stache-bindings","spectre-canjs/sp-file-list/"],function(e,t,n){var r=t("sp-form/fields/sp-dropzone-field/sp-dropzone-field.stache",[{tokenType:"start",args:["can-import",!0,1]},{tokenType:"attrStart",args:["from",1]},{tokenType:"attrValue",args:["spectre-canjs/sp-file-list/",1]},{tokenType:"attrEnd",args:["from",1]},{tokenType:"end",args:["can-import",!0,1]},{tokenType:"chars",args:["\r\n",1]},{tokenType:"start",args:["label",!1,2]},{tokenType:"attrStart",args:["class",2]},{tokenType:"attrValue",args:["form-label",2]},{tokenType:"attrEnd",args:["class",2]},{tokenType:"end",args:["label",!1,2]},{tokenType:"special",args:["alias",2]},{tokenType:"close",args:["label",2]},{tokenType:"chars",args:["\r\n",2]},{tokenType:"start",args:["form",!1,3]},{tokenType:"attrStart",args:["action",3]},{tokenType:"special",args:["url",3]},{tokenType:"attrEnd",args:["action",3]},{tokenType:"attrStart",args:["on:inserted",3]},{tokenType:"attrValue",args:["createDropzone(scope.element)",3]},{tokenType:"attrEnd",args:["on:inserted",3]},{tokenType:"attrStart",args:["class",3]},{tokenType:"attrValue",args:["dropzone",3]},{tokenType:"attrEnd",args:["class",3]},{tokenType:"end",args:["form",!1,5]},{tokenType:"close",args:["form",5]},{tokenType:"chars",args:["\r\n\r\n",5]},{tokenType:"start",args:["div",!1,7]},{tokenType:"attrStart",args:["class",7]},{tokenType:"attrValue",args:["container",7]},{tokenType:"attrEnd",args:["class",7]},{tokenType:"end",args:["div",!1,7]},{tokenType:"chars",args:["\r\n    ",7]},{tokenType:"start",args:["sp-file-list",!1,8]},{tokenType:"attrStart",args:["files:from",8]},{tokenType:"attrValue",args:["value",8]},{tokenType:"attrEnd",args:["files:from",8]},{tokenType:"end",args:["sp-file-list",!1,8]},{tokenType:"chars",args:[" \r\n        ",8]},{tokenType:"start",args:["can-template",!1,9]},{tokenType:"attrStart",args:["name",9]},{tokenType:"attrValue",args:["actions",9]},{tokenType:"attrEnd",args:["name",9]},{tokenType:"end",args:["can-template",!1,9]},{tokenType:"chars",args:["\r\n            ",9]},{tokenType:"start",args:["button",!1,10]},{tokenType:"attrStart",args:["type",10]},{tokenType:"attrValue",args:["button",10]},{tokenType:"attrEnd",args:["type",10]},{tokenType:"attrStart",args:["class",10]},{tokenType:"attrValue",args:["btn btn-warning ",10]},{tokenType:"special",args:["#if(file.isDeleting)",10]},{tokenType:"attrValue",args:["loading",10]},{tokenType:"special",args:["else",10]},{tokenType:"attrValue",args:["tooltip tooltip-left",10]},{tokenType:"special",args:["/if",10]},{tokenType:"attrEnd",args:["class",10]},{tokenType:"attrStart",args:["on:click",10]},{tokenType:"attrValue",args:["scope.root.delete(file, scope.arguments)",10]},{tokenType:"attrEnd",args:["on:click",10]},{tokenType:"attrStart",args:["data-tooltip",10]},{tokenType:"special",args:["file.id",10]},{tokenType:"attrEnd",args:["data-tooltip",10]},{tokenType:"end",args:["button",!1,13]},{tokenType:"start",args:["i",!1,13]},{tokenType:"attrStart",args:["class",13]},{tokenType:"attrValue",args:["fa fa-trash",13]},{tokenType:"attrEnd",args:["class",13]},{tokenType:"end",args:["i",!1,13]},{tokenType:"close",args:["i",13]},{tokenType:"chars",args:[" Delete",13]},{tokenType:"close",args:["button",13]},{tokenType:"chars",args:["\r\n        ",13]},{tokenType:"close",args:["can-template",14]},{tokenType:"chars",args:["\r\n    ",14]},{tokenType:"close",args:["sp-file-list",15]},{tokenType:"chars",args:["\r\n",15]},{tokenType:"close",args:["div",16]},{tokenType:"chars",args:["\r\n",16]},{tokenType:"done",args:[17]}]);return function(t,n,a){var i=Object.assign({module:e},n);return r(t,i,a)}}),define("dropzone@5.4.0#dist/dropzone",function(e,t,n){!function(e,t,n,r){"use strict";function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return void 0!==e&&null!==e?t(e):void 0}function l(e,t,n){return void 0!==e&&null!==e&&"function"==typeof e[t]?n(e,t):void 0}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(){function e(){s(this,e)}return u(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=this._callbacks[e];if(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var i=0,s=s=t;!(i>=s.length);)s[i++].apply(this,r)}return this}},{key:"off",value:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}return this}}]),e}(),d=function(e){function t(e,n){s(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=void 0,o=void 0;if(r.element=e,r.version=t.version,r.defaultOptions.previewTemplate=r.defaultOptions.previewTemplate.replace(/\n*/g,""),r.clickableElements=[],r.listeners=[],r.files=[],"string"==typeof r.element&&(r.element=document.querySelector(r.element)),!r.element||null==r.element.nodeType)throw new Error("Invalid dropzone element.");if(r.element.dropzone)throw new Error("Dropzone already attached.");t.instances.push(r),r.element.dropzone=r;var l=null!=(o=t.optionsForElement(r.element))?o:{};if(r.options=t.extend({},r.defaultOptions,l,null!=n?n:{}),r.options.forceFallback||!t.isBrowserSupported()){var u;return u=r.options.fallback.call(r),a(r,u)}if(null==r.options.url&&(r.options.url=r.element.getAttribute("action")),!r.options.url)throw new Error("No URL provided.");if(r.options.acceptedFiles&&r.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(r.options.uploadMultiple&&r.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return r.options.acceptedMimeTypes&&(r.options.acceptedFiles=r.options.acceptedMimeTypes,delete r.options.acceptedMimeTypes),null!=r.options.renameFilename&&(r.options.renameFile=function(e){return r.options.renameFilename.call(r,e.name,e)}),r.options.method=r.options.method.toUpperCase(),(i=r.getExistingFallback())&&i.parentNode&&i.parentNode.removeChild(i),!1!==r.options.previewsContainer&&(r.options.previewsContainer?r.previewsContainer=t.getElement(r.options.previewsContainer,"previewsContainer"):r.previewsContainer=r.element),r.options.clickable&&(!0===r.options.clickable?r.clickableElements=[r.element]:r.clickableElements=t.getElements(r.options.clickable,"clickable")),r.init(),r}return i(t,c),u(t,null,[{key:"initClass",value:function(){this.prototype.Emitter=c,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){var e=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var n=0,r=r=this.element.getElementsByTagName("div");;){var a;if(n>=r.length)break;var i=a=r[n++];if(/(^| )dz-message($| )/.test(i.className)){e=i,i.className="dz-message";break}}e||(e=t.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var s=e.getElementsByTagName("span")[0];return s&&(null!=s.textContent?s.textContent=this.options.dictFallbackMessage:null!=s.innerText&&(s.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,n,r){var a={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},i=e.width/e.height;null==t&&null==n?(t=a.srcWidth,n=a.srcHeight):null==t?t=n*i:null==n&&(n=t/i);var s=(t=Math.min(t,a.srcWidth))/(n=Math.min(n,a.srcHeight));if(a.srcWidth>t||a.srcHeight>n)if("crop"===r)i>s?(a.srcHeight=e.height,a.srcWidth=a.srcHeight*s):(a.srcWidth=e.width,a.srcHeight=a.srcWidth/s);else{if("contain"!==r)throw new Error("Unknown resizeMethod '"+r+"'");i>s?n=t/i:t=n*i}return a.srcX=(e.width-a.srcWidth)/2,a.srcY=(e.height-a.srcHeight)/2,a.trgWidth=t,a.trgHeight=n,a},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var n=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){e.previewElement=t.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);for(var r=0,a=a=e.previewElement.querySelectorAll("[data-dz-name]");;){var i;if(r>=a.length)break;var s=i=a[r++];s.textContent=e.name}for(var o=0,l=l=e.previewElement.querySelectorAll("[data-dz-size]");!(o>=l.length);)(s=l[o++]).innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink));for(var u=function(r){return r.preventDefault(),r.stopPropagation(),e.status===t.UPLOADING?t.confirm(n.options.dictCancelUploadConfirmation,function(){return n.removeFile(e)}):n.options.dictRemoveFileConfirmation?t.confirm(n.options.dictRemoveFileConfirmation,function(){return n.removeFile(e)}):n.removeFile(e)},c=0,d=d=e.previewElement.querySelectorAll("[data-dz-remove]");!(c>=d.length);)d[c++].addEventListener("click",u)}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(var n=0,r=r=e.previewElement.querySelectorAll("[data-dz-thumbnail]");;){var a;if(n>=r.length)break;var i=a=r[n++];i.alt=e.name,i.src=t}return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error);for(var n=0,r=r=e.previewElement.querySelectorAll("[data-dz-errormessage]");!(n>=r.length);)r[n++].textContent=t}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,n){if(e.previewElement)for(var r=0,a=a=e.previewElement.querySelectorAll("[data-dz-uploadprogress]");;){var i;if(r>=a.length)break;var s=i=a[r++];"PROGRESS"===s.nodeName?s.value=t:s.style.width=t+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=i=n;;){var s;if(a>=i.length)break;var o=s=i[a++];for(var l in o){var u=o[l];e[l]=u}}return e}}]),u(t,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})}},{key:"getFilesWithStatus",value:function(e){return this.files.filter(function(t){return t.status===e}).map(function(e){return e})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(t.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(t.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(t.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(e){return e.status===t.UPLOADING||e.status===t.QUEUED}).map(function(e){return e})}},{key:"init",value:function(){var e=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&function t(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null===e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!==e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!==e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var n=e.hiddenFileInput.files;if(n.length)for(var r=0,a=a=n;;){var i;if(r>=a.length)break;var s=i=a[r++];e.addFile(s)}return e.emit("addedfiles",n),t()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;for(var n=0,r=r=this.events;;){var a;if(n>=r.length)break;var i=a=r[n++];this.on(i,this.options[i])}this.on("uploadprogress",function(){return e.updateTotalUploadProgress()}),this.on("removedfile",function(){return e.updateTotalUploadProgress()}),this.on("canceled",function(t){return e.emit("complete",t)}),this.on("complete",function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)});var s=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(t){return e.emit("dragstart",t)},dragenter:function(t){return s(t),e.emit("dragenter",t)},dragover:function(t){var n=void 0;try{n=t.dataTransfer.effectAllowed}catch(e){}return t.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",s(t),e.emit("dragover",t)},dragleave:function(t){return e.emit("dragleave",t)},drop:function(t){return s(t),e.drop(t)},dragend:function(t){return e.emit("dragend",t)}}}],this.clickableElements.forEach(function(n){return e.listeners.push({element:n,events:{click:function(r){return(n!==e.element||r.target===e.element||t.elementInside(r.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,t.instances.splice(t.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e=void 0,t=0,n=0;if(this.getActiveFiles().length){for(var r=0,a=a=this.getActiveFiles();;){var i;if(r>=a.length)break;var s=i=a[r++];t+=s.upload.bytesSent,n+=s.upload.total}e=100*t/n}else e=100;return this.emit("totaluploadprogress",e,n,t)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){var e=void 0,n=void 0;if(e=this.getExistingFallback())return e;var r='<div class="dz-fallback">';this.options.dictFallbackText&&(r+="<p>"+this.options.dictFallbackText+"</p>"),r+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var a=t.createElement(r);return"FORM"!==this.element.tagName?(n=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(a):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=n?n:a}},{key:"getExistingFallback",value:function(){for(var e=["div","form"],t=0;t<e.length;t++){var n,r=e[t];if(n=function(e){for(var t=0,n=n=e;;){var r;if(t>=n.length)break;var a=r=n[t++];if(/(^| )fallback($| )/.test(a.className))return a}}(this.element.getElementsByTagName(r)))return n}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var n in e.events){var r=e.events[n];t.push(e.element.addEventListener(n,r,!1))}return t}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var n in e.events){var r=e.events[n];t.push(e.element.removeEventListener(n,r,!1))}return t}()})}},{key:"disable",value:function(){var e=this;return this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(t){return e.cancelUpload(t)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,n="b";if(e>0){for(var r=["tb","gb","mb","kb","b"],a=0;a<r.length;a++){var i=r[a];if(e>=Math.pow(this.options.filesizeBase,4-a)/10){t=e/Math.pow(this.options.filesizeBase,4-a),n=i;break}}t=Math.round(10*t)/10}return"<strong>"+t+"</strong> "+this.options.dictFileSizeUnits[n]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],n=0;n<e.dataTransfer.files.length;n++)t[n]=e.dataTransfer.files[n];if(this.emit("addedfiles",t),t.length){var r=e.dataTransfer.items;r&&r.length&&null!=r[0].webkitGetAsEntry?this._addFilesFromItems(r):this.handleFiles(t)}}}},{key:"paste",value:function(e){if(null!=o(null!=e?e.clipboardData:void 0,function(e){return e.items})){this.emit("paste",e);var t=e.clipboardData.items;return t.length?this._addFilesFromItems(t):void 0}}},{key:"handleFiles",value:function(e){for(var t=0,n=n=e;;){var r;if(t>=n.length)break;var a=r=n[t++];this.addFile(a)}}},{key:"_addFilesFromItems",value:function(e){var t=this;return function(){for(var n=[],r=0,a=a=e;;){var i;if(r>=a.length)break;var s,o=i=a[r++];null!=o.webkitGetAsEntry&&(s=o.webkitGetAsEntry())?s.isFile?n.push(t.addFile(o.getAsFile())):s.isDirectory?n.push(t._addFilesFromDirectory(s,s.name)):n.push(void 0):null==o.getAsFile||null!=o.kind&&"file"!==o.kind?n.push(void 0):n.push(t.addFile(o.getAsFile()))}return n}()}},{key:"_addFilesFromDirectory",value:function(e,t){var n=this,r=e.createReader(),a=function(e){return l(console,"log",function(t){return t.log(e)})};return function e(){return r.readEntries(function(r){if(r.length>0){for(var a=0,i=i=r;;){var s;if(a>=i.length)break;var o=s=i[a++];o.isFile?o.file(function(e){if(!n.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=t+"/"+e.name,n.addFile(e)}):o.isDirectory&&n._addFilesFromDirectory(o,t+"/"+o.name)}e()}return null},a)}()}},{key:"accept",value:function(e,n){return e.size>1024*this.options.maxFilesize*1024?n(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(n(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,n):n(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var n=this;return e.upload={uuid:t.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e),chunked:this.options.chunking&&(this.options.forceChunking||e.size>this.options.chunkSize),totalChunkCount:Math.ceil(e.size/this.options.chunkSize)},this.files.push(e),e.status=t.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return t?(e.accepted=!1,n._errorProcessing([e],t)):(e.accepted=!0,n.options.autoQueue&&n.enqueueFile(e)),n._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(e){for(var t=0,n=n=e;;){var r;if(t>=n.length)break;var a=r=n[t++];this.enqueueFile(a)}return null}},{key:"enqueueFile",value:function(e){var n=this;if(e.status!==t.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=t.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return n.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(n){return e.emit("thumbnail",t,n),e._processingThumbnail=!1,e._processThumbnailQueue()})}}},{key:"removeFile",value:function(e){if(e.status===t.UPLOADING&&this.cancelUpload(e),this.files=p(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);for(var n=0,r=r=this.files.slice();;){var a;if(n>=r.length)break;var i=a=r[n++];(i.status!==t.UPLOADING||e)&&this.removeFile(i)}return null}},{key:"resizeImage",value:function(e,n,r,a,i){var s=this;return this.createThumbnail(e,n,r,a,!1,function(n,r){if(null==r)return i(e);var a=s.options.resizeMimeType;null==a&&(a=e.type);var o=r.toDataURL(a,s.options.resizeQuality);return"image/jpeg"!==a&&"image/jpg"!==a||(o=v.restore(e.dataURL,o)),i(t.dataURItoBlob(o))})}},{key:"createThumbnail",value:function(e,t,n,r,a,i){var s=this,o=new FileReader;return o.onload=function(){if(e.dataURL=o.result,"image/svg+xml"!==e.type)return s.createThumbnailFromUrl(e,t,n,r,a,i);null!=i&&i(o.result)},o.readAsDataURL(e)}},{key:"createThumbnailFromUrl",value:function(e,t,n,r,a,i,s){var o=this,l=document.createElement("img");return s&&(l.crossOrigin=s),l.onload=function(){var s=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&a&&(s=function(e){return EXIF.getData(l,function(){return e(EXIF.getTag(this,"Orientation"))})}),s(function(a){e.width=l.width,e.height=l.height;var s=o.options.resize.call(o,e,t,n,r),u=document.createElement("canvas"),c=u.getContext("2d");switch(u.width=s.trgWidth,u.height=s.trgHeight,a>4&&(u.width=s.trgHeight,u.height=s.trgWidth),a){case 2:c.translate(u.width,0),c.scale(-1,1);break;case 3:c.translate(u.width,u.height),c.rotate(Math.PI);break;case 4:c.translate(0,u.height),c.scale(1,-1);break;case 5:c.rotate(.5*Math.PI),c.scale(1,-1);break;case 6:c.rotate(.5*Math.PI),c.translate(0,-u.height);break;case 7:c.rotate(.5*Math.PI),c.translate(u.width,-u.height),c.scale(-1,1);break;case 8:c.rotate(-.5*Math.PI),c.translate(-u.width,0)}g(c,l,null!=s.srcX?s.srcX:0,null!=s.srcY?s.srcY:0,s.srcWidth,s.srcHeight,null!=s.trgX?s.trgX:0,null!=s.trgY?s.trgY:0,s.trgWidth,s.trgHeight);var d=u.toDataURL("image/png");if(null!=i)return i(d,u)})},null!=i&&(l.onerror=i),l.src=e.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,n=t;if(!(t>=e)){var r=this.getQueuedFiles();if(r.length>0){if(this.options.uploadMultiple)return this.processFiles(r.slice(0,e-t));for(;n<e;){if(!r.length)return;this.processFile(r.shift()),n++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){for(var n=0,r=r=e;;){var a;if(n>=r.length)break;var i=a=r[n++];i.processing=!0,i.status=t.UPLOADING,this.emit("processing",i)}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter(function(t){return t.xhr===e}).map(function(e){return e})}},{key:"cancelUpload",value:function(e){if(e.status===t.UPLOADING){for(var n=this._getFilesWithXhr(e.xhr),r=0,a=a=n;!(r>=a.length);)a[r++].status=t.CANCELED;void 0!==e.xhr&&e.xhr.abort();for(var i=0,s=s=n;;){var o;if(i>=s.length)break;var l=o=s[i++];this.emit("canceled",l)}this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else e.status!==t.ADDED&&e.status!==t.QUEUED||(e.status=t.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"==typeof e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(this,n)}return e}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(e){var n=this;this._transformFiles(e,function(r){if(e[0].upload.chunked){var a=e[0],i=r[0],s=0;a.upload.chunks=[];var o=function(){for(var r=0;void 0!==a.upload.chunks[r];)r++;if(!(r>=a.upload.totalChunkCount)){s++;var o=r*n.options.chunkSize,l=Math.min(o+n.options.chunkSize,a.size),u={name:n._getParamName(0),data:i.webkitSlice?i.webkitSlice(o,l):i.slice(o,l),filename:a.upload.filename,chunkIndex:r};a.upload.chunks[r]={file:a,index:r,dataBlock:u,status:t.UPLOADING,progress:0,retries:0},n._uploadData(e,[u])}};if(a.upload.finishedChunkUpload=function(r){var i=!0;r.status=t.SUCCESS,r.dataBlock=null;for(var s=0;s<a.upload.totalChunkCount;s++){if(void 0===a.upload.chunks[s])return o();a.upload.chunks[s].status!==t.SUCCESS&&(i=!1)}i&&n.options.chunksUploaded(a,function(){n._finished(e,"",null)})},n.options.parallelChunkUploads)for(var l=0;l<a.upload.totalChunkCount;l++)o();else o()}else{for(var u=[],c=0;c<e.length;c++)u[c]={name:n._getParamName(c),data:r[c],filename:e[c].upload.filename};n._uploadData(e,u)}})}},{key:"_getChunk",value:function(e,t){for(var n=0;n<e.upload.totalChunkCount;n++)if(void 0!==e.upload.chunks[n]&&e.upload.chunks[n].xhr===t)return e.upload.chunks[n]}},{key:"_uploadData",value:function(e,n){for(var r=this,a=new XMLHttpRequest,i=0,s=s=e;!(i>=s.length);)s[i++].xhr=a;e[0].upload.chunked&&(e[0].upload.chunks[n[0].chunkIndex].xhr=a);var o=this.resolveOption(this.options.method,e),l=this.resolveOption(this.options.url,e);a.open(o,l,!0),a.timeout=this.resolveOption(this.options.timeout,e),a.withCredentials=!!this.options.withCredentials,a.onload=function(t){r._finishedUploading(e,a,t)},a.onerror=function(){r._handleUploadError(e,a)},(null!=a.upload?a.upload:a).onprogress=function(t){return r._updateFilesUploadProgress(e,a,t)};var u={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};this.options.headers&&t.extend(u,this.options.headers);for(var c in u){var d=u[c];d&&a.setRequestHeader(c,d)}var p=new FormData;if(this.options.params){var f=this.options.params;"function"==typeof f&&(f=f.call(this,e,a,e[0].upload.chunked?this._getChunk(e[0],a):null));for(var h in f){var g=f[h];p.append(h,g)}}for(var v=0,m=m=e;;){var y;if(v>=m.length)break;var k=y=m[v++];this.emit("sending",k,a,p)}this.options.uploadMultiple&&this.emit("sendingmultiple",e,a,p),this._addFormElementData(p);for(var b=0;b<n.length;b++){var T=n[b];p.append(T.name,T.data,T.filename)}this.submitRequest(a,p,e)}},{key:"_transformFiles",value:function(e,t){for(var n=this,r=[],a=0,i=0;i<e.length;i++)!function(i){n.options.transformFile.call(n,e[i],function(n){r[i]=n,++a===e.length&&t(r)})}(i)}},{key:"_addFormElementData",value:function(e){if("FORM"===this.element.tagName)for(var t=0,n=n=this.element.querySelectorAll("input, textarea, select, button");;){var r;if(t>=n.length)break;var a=r=n[t++],i=a.getAttribute("name"),s=a.getAttribute("type");if(s&&(s=s.toLowerCase()),void 0!==i&&null!==i)if("SELECT"===a.tagName&&a.hasAttribute("multiple"))for(var o=0,l=l=a.options;;){var u;if(o>=l.length)break;var c=u=l[o++];c.selected&&e.append(i,c.value)}else(!s||"checkbox"!==s&&"radio"!==s||a.checked)&&e.append(i,a.value)}}},{key:"_updateFilesUploadProgress",value:function(e,t,n){var r=void 0;if(void 0!==n){if(r=100*n.loaded/n.total,e[0].upload.chunked){var a=e[0],i=this._getChunk(a,t);i.progress=r,i.total=n.total,i.bytesSent=n.loaded,a.upload.progress=0,a.upload.total=0,a.upload.bytesSent=0;for(var s=0;s<a.upload.totalChunkCount;s++)void 0!==a.upload.chunks[s]&&void 0!==a.upload.chunks[s].progress&&(a.upload.progress+=a.upload.chunks[s].progress,a.upload.total+=a.upload.chunks[s].total,a.upload.bytesSent+=a.upload.chunks[s].bytesSent);a.upload.progress=a.upload.progress/a.upload.totalChunkCount}else for(var o=0,l=l=e;;){var u;if(o>=l.length)break;var c=u=l[o++];c.upload.progress=r,c.upload.total=n.total,c.upload.bytesSent=n.loaded}for(var d=0,p=p=e;;){var f;if(d>=p.length)break;var h=f=p[d++];this.emit("uploadprogress",h,h.upload.progress,h.upload.bytesSent)}}else{var g=!0;r=100;for(var v=0,m=m=e;;){var y;if(v>=m.length)break;var k=y=m[v++];100===k.upload.progress&&k.upload.bytesSent===k.upload.total||(g=!1),k.upload.progress=r,k.upload.bytesSent=k.upload.total}if(g)return;for(var b=0,T=T=e;;){var x;if(b>=T.length)break;var w=x=T[b++];this.emit("uploadprogress",w,r,w.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(e,n,r){var a=void 0;if(e[0].status!==t.CANCELED&&4===n.readyState){if("arraybuffer"!==n.responseType&&"blob"!==n.responseType&&(a=n.responseText,n.getResponseHeader("content-type")&&~n.getResponseHeader("content-type").indexOf("application/json")))try{a=JSON.parse(a)}catch(e){r=e,a="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=n.status&&n.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],n)):this._finished(e,a,r):this._handleUploadError(e,n,a)}}},{key:"_handleUploadError",value:function(e,n,r){if(e[0].status!==t.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var a=this._getChunk(e[0],n);if(a.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[a.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var i=0,s=s=e;!(i>=s.length);)s[i++],this._errorProcessing(e,r||this.options.dictResponseError.replace("{{statusCode}}",n.status),n)}}},{key:"submitRequest",value:function(e,t,n){e.send(t)}},{key:"_finished",value:function(e,n,r){for(var a=0,i=i=e;;){var s;if(a>=i.length)break;var o=s=i[a++];o.status=t.SUCCESS,this.emit("success",o,n,r),this.emit("complete",o)}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,n,r),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,n,r){for(var a=0,i=i=e;;){var s;if(a>=i.length)break;var o=s=i[a++];o.status=t.ERROR,this.emit("error",o,n,r),this.emit("complete",o)}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,n,r),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}]),t}();d.initClass(),d.version="5.4.0",d.options={},d.optionsForElement=function(e){return e.getAttribute("id")?d.options[f(e.getAttribute("id"))]:void 0},d.instances=[],d.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},d.autoDiscover=!0,d.discover=function(){var e=void 0;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];var t=function(t){return function(){for(var n=[],r=0,a=a=t;;){var i;if(r>=a.length)break;var s=i=a[r++];/(^| )dropzone($| )/.test(s.className)?n.push(e.push(s)):n.push(void 0)}return n}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){for(var t=[],n=0,r=r=e;;){var a;if(n>=r.length)break;var i=a=r[n++];!1!==d.optionsForElement(i)?t.push(new d(i)):t.push(void 0)}return t}()},d.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],d.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var t=0,n=n=d.blacklistedBrowsers;!(t>=n.length);)n[t++].test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},d.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),a=new Uint8Array(r),i=0,s=t.length,o=0<=s;o?i<=s:i>=s;o?i++:i--)a[i]=t.charCodeAt(i);return new Blob([r],{type:n})};var p=function(e,t){return e.filter(function(e){return e!==t}).map(function(e){return e})},f=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};d.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},d.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},d.getElement=function(e,t){var n=void 0;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},d.getElements=function(e,t){var n=void 0,r=void 0;if(e instanceof Array){r=[];try{for(var a=0,i=i=e;!(a>=i.length);)n=i[a++],r.push(this.getElement(n,t))}catch(e){r=null}}else if("string"==typeof e){r=[];for(var s=0,o=o=document.querySelectorAll(e);!(s>=o.length);)n=o[s++],r.push(n)}else null!=e.nodeType&&(r=[e]);if(null==r||!r.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return r},d.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},d.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");for(var n=e.type,r=n.replace(/\/.*$/,""),a=0,i=i=t;;){var s;if(a>=i.length)break;var o=s=i[a++];if("."===(o=o.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(o.toLowerCase(),e.name.length-o.length))return!0}else if(/\/\*$/.test(o)){if(r===o.replace(/\/.*$/,""))return!0}else if(n===o)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new d(this,e)})}),void 0!==r&&null!==r?r.exports=d:window.Dropzone=d,d.ADDED="added",d.QUEUED="queued",d.ACCEPTED=d.QUEUED,d.UPLOADING="uploading",d.PROCESSING=d.UPLOADING,d.CANCELED="canceled",d.ERROR="error",d.SUCCESS="success";var h=function(e){e.naturalWidth;var t=e.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=t;var r=n.getContext("2d");r.drawImage(e,0,0);for(var a=r.getImageData(1,0,1,t).data,i=0,s=t,o=t;o>i;)0===a[4*(o-1)+3]?s=o:i=o,o=s+i>>1;var l=o/t;return 0===l?1:l},g=function(e,t,n,r,a,i,s,o,l,u){var c=h(t);return e.drawImage(t,n,r,a,i,s,o,l,u/c)},v=function(){function e(){s(this,e)}return u(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",n=void 0,r=void 0,a="",i=void 0,s=void 0,o=void 0,l="",u=0;n=e[u++],r=e[u++],a=e[u++],i=n>>2,s=(3&n)<<4|r>>4,o=(15&r)<<2|a>>6,l=63&a,isNaN(r)?o=l=64:isNaN(a)&&(l=64),t=t+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(l),n=r=a="",i=s=o=l="",u<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var n=this.decode64(e.replace("data:image/jpeg;base64,","")),r=this.slice2Segments(n),a=this.exifManipulation(t,r);return"data:image/jpeg;base64,"+this.encode64(a)}},{key:"exifManipulation",value:function(e,t){var n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)}},{key:"getExifArray",value:function(e){for(var t=void 0,n=0;n<e.length;){if(255===(t=e[n])[0]&225===t[1])return t;n++}return[]}},{key:"insertExif",value:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),a=r.indexOf(255,3),i=r.slice(0,a),s=r.slice(a),o=i;return o=o.concat(t),o=o.concat(s)}},{key:"slice2Segments",value:function(e){for(var t=0,n=[];;){var r;if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1])t+=2;else{var a=t+(r=256*e[t+2]+e[t+3])+2,i=e.slice(t,a);n.push(i),t=a}if(t>e.length)break}return n}},{key:"decode64",value:function(e){var t=void 0,n=void 0,r="",a=void 0,i=void 0,s=void 0,o="",l=0,u=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");a=this.KEY_STR.indexOf(e.charAt(l++)),i=this.KEY_STR.indexOf(e.charAt(l++)),s=this.KEY_STR.indexOf(e.charAt(l++)),o=this.KEY_STR.indexOf(e.charAt(l++)),t=a<<2|i>>4,n=(15&i)<<4|s>>2,r=(3&s)<<6|o,u.push(t),64!==s&&u.push(n),64!==o&&u.push(r),t=n=r="",a=i=s=o="",l<e.length;);return u}}]),e}();v.initClass(),d._autoDiscoverFunction=function(){if(d.autoDiscover)return d.discover()},function(e,t){var n=!1,r=!0,a=e.document,i=a.documentElement,s=a.addEventListener?"addEventListener":"attachEvent",o=a.addEventListener?"removeEventListener":"detachEvent",l=a.addEventListener?"":"on",u=function r(i){if("readystatechange"!==i.type||"complete"===a.readyState)return("load"===i.type?e:a)[o](l+i.type,r,!1),!n&&(n=!0)?t.call(e,i.type||i):void 0};if("complete"!==a.readyState){if(a.createEventObject&&i.doScroll){try{r=!e.frameElement}catch(e){}r&&function e(){try{i.doScroll("left")}catch(t){return void setTimeout(e,50)}return u("poll")}()}a[s](l+"DOMContentLoaded",u,!1),a[s](l+"readystatechange",u,!1),e[s](l+"load",u,!1)}}(window,d._autoDiscoverFunction)}(0,0,0,n)}),define("spectre-canjs@2.3.0#sp-form/fields/sp-dropzone-field/ViewModel",["exports","dropzone","axios","spectre-canjs/util/field/Field","can-define/list/list","can-define/map/map"],function(e,t,n,r,a,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var o=s(t),l=s(n),u=s(r),c=s(a),d=s(i).default.extend("File",{seal:!1},{isDeleting:"boolean",id:"string",uri:"string"}),p=c.default.extend("FileList",{"#":d});e.default=u.default.extend("DropZoneField",{value:{Default:p,Type:p},dropzone:"*",url:{type:"string",default:"/api/uploads"},paramName:{type:"string",default:"uri"},headers:{type:"*",default:function(){return{}}},createDropzone:function(e){this.dropzone=new o.default(e,{url:this.url,paramName:"uri",params:{id:12345},headers:this.headers}),this.dropzone.on("success",this.uploadSuccess.bind(this)),this.dropzone.on("complete",this.clearUploadedFile.bind(this))},uploadSuccess:function(e,t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={id:t,uri:t}}this.value.push(t),this.dispatch("fieldchange",[this])},clearUploadedFile:function(e){var t=this;setTimeout(function(){t.dropzone.removeFile(e)},2e3)},delete:function(e){var t=this;return e.isDeleting=!0,console.warn("deleting file using url",this.url,e.id),l.default.delete(this.url+"/"+e.id,{headers:this.headers}).then(function(){t.value.splice(t.value.indexOf(e),1),t.dispatch("fieldchange",[t])}).catch(function(n){n.request&&404===n.request.status&&t.value.splice(t.value.indexOf(e),1),console.warn("error occurred when deleting file",e,n)})}})}),define("spectre-canjs@2.3.0#sp-form/fields/sp-dropzone-field/sp-dropzone-field",["exports","can-component","./sp-dropzone-field.stache","./ViewModel","./sp-dropzone-field.less","dropzone/dist/dropzone.css","dropzone/dist/basic.css"],function(e,t,n,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(t),s=a(n),o=a(r);e.default=i.default.extend({tag:"sp-dropzone-field",ViewModel:o.default,view:s.default})}),define("spectre-canjs@2.3.0#sp-form/fields/sp-subform-field/sp-subform-field.stache!steal-stache@4.1.0#steal-stache",["module","can-stache","can-stache/src/mustache_core","can-view-import@4.0.2#can-view-import","can-stache-bindings@4.1.0#can-stache-bindings"],function(e,t,n){var r=t("sp-form/fields/sp-subform-field/sp-subform-field.stache",[{tokenType:"start",args:["div",!1,1]},{tokenType:"attrStart",args:["class",1]},{tokenType:"attrValue",args:["form-group",1]},{tokenType:"attrEnd",args:["class",1]},{tokenType:"end",args:["div",!1,1]},{tokenType:"chars",args:["\r\n  ",1]},{tokenType:"start",args:["fieldset",!1,2]},{tokenType:"end",args:["fieldset",!1,2]},{tokenType:"chars",args:["\r\n    ",2]},{tokenType:"start",args:["legend",!1,3]},{tokenType:"end",args:["legend",!1,3]},{tokenType:"special",args:["alias",3]},{tokenType:"close",args:["legend",3]},{tokenType:"chars",args:["\r\n    ",3]},{tokenType:"start",args:["sp-form",!1,4]},{tokenType:"attrStart",args:["inline:from",4]},{tokenType:"attrValue",args:["inline",4]},{tokenType:"attrEnd",args:["inline:from",4]},{tokenType:"attrStart",args:["object:bind",4]},{tokenType:"attrValue",args:["value",4]},{tokenType:"attrEnd",args:["object:bind",4]},{tokenType:"attrStart",args:["on:fieldchange",4]},{tokenType:"attrValue",args:["saveField(scope.arguments)",4]},{tokenType:"attrEnd",args:["on:fieldchange",4]},{tokenType:"attrStart",args:["fields:from",4]},{tokenType:"attrValue",args:["formFields",4]},{tokenType:"attrEnd",args:["fields:from",4]},{tokenType:"end",args:["sp-form",!1,7]},{tokenType:"chars",args:["\r\n      ",7]},{tokenType:"start",args:["can-template",!1,8]},{tokenType:"attrStart",args:["name",8]},{tokenType:"attrValue",args:["submit",8]},{tokenType:"attrEnd",args:["name",8]},{tokenType:"end",args:["can-template",!1,8]},{tokenType:"start",args:["i",!0,8]},{tokenType:"end",args:["i",!0,8]},{tokenType:"close",args:["can-template",8]},{tokenType:"chars",args:["\r\n    ",8]},{tokenType:"close",args:["sp-form",9]},{tokenType:"chars",args:["\r\n  ",9]},{tokenType:"close",args:["fieldset",10]},{tokenType:"chars",args:["\r\n",10]},{tokenType:"close",args:["div",11]},{tokenType:"chars",args:["\r\n",11]},{tokenType:"done",args:[12]}]);return function(t,n,a){var i=Object.assign({module:e},n);return r(t,i,a)}}),define("spectre-canjs@2.3.0#sp-form/fields/sp-subform-field/ViewModel",["exports","can-define/map/map","spectre-canjs/util/field/Field","spectre-canjs/util/field/parseFieldArray/parseFieldArray","spectre-canjs/util/field/mapToFields/mapToFields"],function(e,t,n,r,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(t),o=i(n),l=i(r),u=i(a),c=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=o.default.extend("SubformField",{value:{Default:s.default,Type:s.default,set:function(e){return this.value!==e&&this.dispatch("fieldchange",[{value:e,name:this.name}]),e}},subType:"*",formFields:{get:function(){if(this.fields&&this.fields.length)return(0,l.default)(this.fields);var e=this.subType||this.Type;return(0,u.default)(e)}},saveField:function(e){var t=c(e,1)[0];this.value.assign(t.dirty.get()),this.dispatch("fieldchange",[this])}})}),define("spectre-canjs@2.3.0#sp-form/fields/sp-subform-field/sp-subform-field",["exports","can-component","./sp-subform-field.stache","./ViewModel","./sp-subform-field.less"],function(e,t,n,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(t),s=a(n),o=a(r);e.default=i.default.extend({tag:"sp-subform-field",view:s.default,ViewModel:o.default})}),define("spectre-canjs@2.3.0#sp-form/demo/full/full.stache!steal-stache@4.1.0#steal-stache",["module","can-stache","can-stache/src/mustache_core","can-view-import@4.0.2#can-view-import","can-stache-bindings@4.1.0#can-stache-bindings"],function(e,t,n){var r=t("sp-form/demo/full/full.stache",[{tokenType:"start",args:["h1",!1,1]},{tokenType:"end",args:["h1",!1,1]},{tokenType:"chars",args:["Form Widget Demo",1]},{tokenType:"close",args:["h1",1]},{tokenType:"chars",args:["\r\n",1]},{tokenType:"start",args:["div",!1,2]},{tokenType:"attrStart",args:["class",2]},{tokenType:"attrValue",args:["columns",2]},{tokenType:"attrEnd",args:["class",2]},{tokenType:"end",args:["div",!1,2]},{tokenType:"chars",args:["\r\n    ",2]},{tokenType:"start",args:["div",!1,3]},{tokenType:"attrStart",args:["class",3]},{tokenType:"attrValue",args:["col-6 col-sm-12 container",3]},{tokenType:"attrEnd",args:["class",3]},{tokenType:"end",args:["div",!1,3]},{tokenType:"chars",args:["\r\n        ",3]},{tokenType:"start",args:["sp-form",!1,4]},{tokenType:"attrStart",args:["object:bind",4]},{tokenType:"attrValue",args:["object",4]},{tokenType:"attrEnd",args:["object:bind",4]},{tokenType:"attrStart",args:["dirty:u:object:to",4]},{tokenType:"attrValue",args:["dirtyObject",4]},{tokenType:"attrEnd",args:["dirty:u:object:to",4]},{tokenType:"attrStart",args:["actions:from",4]},{tokenType:"attrValue",args:["actions",4]},{tokenType:"attrEnd",args:["actions:from",4]},{tokenType:"attrStart",args:["on:submit",4]},{tokenType:"attrValue",args:["onSubmit(scope.arguments)",4]},{tokenType:"attrEnd",args:["on:submit",4]},{tokenType:"attrStart",args:["is:u:saving:bind",4]},{tokenType:"attrValue",args:["formSaving",4]},{tokenType:"attrEnd",args:["is:u:saving:bind",4]},{tokenType:"attrStart",args:["on:cancel",4]},{tokenType:"attrValue",args:["onCancel",4]},{tokenType:"attrEnd",args:["on:cancel",4]},{tokenType:"end",args:["sp-form",!1,10]},{tokenType:"close",args:["sp-form",10]},{tokenType:"chars",args:["\r\n        ",10]},{tokenType:"close",args:["div",11]},{tokenType:"chars",args:["\r\n        ",11]},{tokenType:"start",args:["div",!1,12]},{tokenType:"attrStart",args:["class",12]},{tokenType:"attrValue",args:["col-6 col-sm12 container",12]},{tokenType:"attrEnd",args:["class",12]},{tokenType:"end",args:["div",!1,12]},{tokenType:"chars",args:["\r\n        \r\n        ",12]},{tokenType:"start",args:["p",!1,14]},{tokenType:"end",args:["p",!1,14]},{tokenType:"chars",args:["Model object values: ",14]},{tokenType:"close",args:["p",14]},{tokenType:"chars",args:["\r\n        ",14]},{tokenType:"start",args:["div",!1,15]},{tokenType:"attrStart",args:["class",15]},{tokenType:"attrValue",args:["json",15]},{tokenType:"attrEnd",args:["class",15]},{tokenType:"end",args:["div",!1,15]},{tokenType:"special",args:["{stringify (object)",15]},{tokenType:"close",args:["div",15]},{tokenType:"chars",args:["\r\n        ",15]},{tokenType:"start",args:["div",!0,16]},{tokenType:"attrStart",args:["class",16]},{tokenType:"attrValue",args:["divider",16]},{tokenType:"attrEnd",args:["class",16]},{tokenType:"end",args:["div",!0,16]},{tokenType:"chars",args:["\r\n\r\n        ",16]},{tokenType:"start",args:["p",!1,18]},{tokenType:"end",args:["p",!1,18]},{tokenType:"chars",args:["Dirty field values",18]},{tokenType:"close",args:["p",18]},{tokenType:"chars",args:["\r\n        ",18]},{tokenType:"start",args:["div",!1,19]},{tokenType:"attrStart",args:["class",19]},{tokenType:"attrValue",args:["json",19]},{tokenType:"attrEnd",args:["class",19]},{tokenType:"end",args:["div",!1,19]},{tokenType:"special",args:["{stringify (dirtyObject)",19]},{tokenType:"close",args:["div",19]},{tokenType:"chars",args:["\r\n    ",19]},{tokenType:"close",args:["div",20]},{tokenType:"chars",args:["\r\n",20]},{tokenType:"close",args:["div",21]},{tokenType:"done",args:[21]}]);return function(t,n,a){var i=Object.assign({module:e},n);return r(t,i,a)}}),define("can-set@1.5.2#src/helpers",["require","exports","module","can-util/js/assign/assign","can-util/js/each/each","can-util/js/last/last"],function(e,t,n){var r,a=e("can-util/js/assign/assign"),i=e("can-util/js/each/each"),s=e("can-util/js/last/last");n.exports=r={eachInUnique:function(e,t,n,r,i){var s,o=a({},n);for(var l in e){if(void 0!==(s=t(e[l],n[l],e,n,l)))return s;delete o[l]}for(l in o)if(void 0!==(s=r(void 0,n[l],e,n,l)))return s;return i},doubleLoop:function(e,t){"function"==typeof t&&(t={iterate:t});for(var n=0;n<e.length;){t.start&&t.start(e[n]);for(var r=n+1;r<e.length;)!1===t.iterate(e[r],r,e[n],n)?e.splice(r,1):r++;t.end&&t.end(e[n]),n++}},identityMap:function(e){var t={};return i(e,function(e){t[e]=1}),t},arrayUnionIntersectionDifference:function(e,t){var n={},a=[],s=[],o=e.slice(0);return i(e,function(e){n[e]=!0,s.push(e)}),i(t,function(e){if(n[e]){a.push(e);var t=r.indexOf.call(o,e);-1!==t&&o.splice(t,1)}else s.push(e)}),{intersection:a,union:s,difference:o}},arraySame:function(e,t){if(e.length!==t.length)return!1;for(var n=r.identityMap(e),a=0;a<t.length;a++){var i=n[t[a]];if(!i)return!1;if(i>1)return!1;n[t[a]]++}return!0},indexOf:Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},map:Array.prototype.map||function(e){for(var t=[],n=0,r=this.length;n<r;n++)t.push(e(this[n],n,this));return t},filter:Array.prototype.filter||function(e){for(var t=[],n=0,r=this.length;n<r;n++)e(this[n],n,this)&&t.push(this[n]);return t},ignoreType:new function(){},firstProp:function(e){for(var t in e)return t},index:function(e,t,n){if(t&&t.length){if(-1===e(n,t[0]))return 0;if(1===e(n,s(t)))return t.length;for(var r=0,a=t.length;r<a;){var i=r+a>>>1;-1===e(n,t[i])?a=i:r=i+1}return a}},defaultSort:function(e,t,n){var r,a=e.split(" "),i=a[0],s=t[i],o=n[i],l=a[1]||"";return(l="desc"===l.toLowerCase())&&(r=s,s=o,o=r),s<o?-1:s>o?1:0}}}),define("can-set@1.5.2#src/clause",["require","exports","module","can-util/js/assign/assign","can-util/js/each/each"],function(e,t,n){var r=e("can-util/js/assign/assign"),a=e("can-util/js/each/each"),i={};n.exports=i,i.TYPES=["where","order","paginate","id"],a(i.TYPES,function(e){var t=e.charAt(0).toUpperCase()+e.substr(1);i[t]=function(e){r(this,e)},i[t].type=e})}),define("can-set@1.5.2#src/compare",["require","exports","module","./helpers","can-util/js/assign/assign","can-util/js/each/each","can-util/js/make-array/make-array"],function(e,t,n){var r,a=e("./helpers"),i=e("can-util/js/assign/assign"),s=e("can-util/js/each/each"),o=e("can-util/js/make-array/make-array"),l=function(e,t,n,r,a,i,s){for(var o=s.checks,l=0;l<o.length;l++){var u=o[l](e,t,n,r,a,i||{},s);if(void 0!==u)return u}return s.default},u=function(e,t,n,r,a,i,s){var o;if(a in n){if(a in r)return!1}else o="subsetB";a in r||(o="subsetA"),s.result[a]="subsetB"===o?t:e},c=function(e,t){return function(t,n,r,a,i,s,o){var l=e.apply(this,arguments);return!0===l?(void 0===i||i in o.result||(o.result[i]=t),!0):l}},d=function(e,t){return function(t,n,r,a,s,o,l){var u=l.result;l.result={};var c=e.apply(this,arguments);return c&&(void 0!==s?u[s]=l.result:i(u,l.result)),l.result=u,c}};n.exports=r={equal:function(e,t,n,a,i,s,o){return o.checks=[r.equalComparesType,r.equalBasicTypes,r.equalArrayLike,r.equalObject],o.default=!1,l(e,t,n,a,i,s,o)},equalComparesType:function(e,t,n,r,a,i,s){if("function"==typeof i){var o=i(e,t,n,r,a,s);if("boolean"==typeof o)return o;if(o&&"object"==typeof o){if("intersection"in o&&!("difference"in o)){var l=i(t,e,r,n,a,s);return"intersection"in l&&!("difference"in l)}return!1}return o}},equalBasicTypes:function(e,t,n,r,a,i,s){return null===e||null===t?e===t:e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():-1===s.deep?"object"==typeof e||e===t:typeof e==typeof t&&Array.isArray(e)===Array.isArray(t)&&(e===t||void 0)},equalArrayLike:function(e,t,n,r,a,i,s){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++){var u=void 0===i[o]?i["*"]:i[o];if(!l(e[o],t[o],e,t,o,u,s))return!1}return!0}},equalObject:function(e,t,n,r,a,s,o){var u=typeof e;if("object"===u||"function"===u){var c=i({},t);!1===o.deep&&(o.deep=-1);for(var d in e){var p=void 0===s[d]?s["*"]:s[d];if(!l(e[d],t[d],e,t,d,p,o))return!1;delete c[d]}for(d in c)if(void 0===s[d]||!l(void 0,t[d],e,t,d,s[d],o))return!1;return!0}},subset:function(e,t,n,a,i,s,o){return o.checks=[r.subsetComparesType,r.equalBasicTypes,r.equalArrayLike,r.subsetObject],o.getSubsets=[],o.default=!1,l(e,t,n,a,i,s,o)},subsetObject:function(e,t,n,r,i,s,o){var u=typeof e;if("object"===u||"function"===u)return a.eachInUnique(e,function(e,t,n,r,a){var i=void 0===s[a]?s["*"]:s[a];if(!l(e,t,n,r,a,i,o)&&a in r)return!1},t,function(e,t,n,r,a){var i=void 0===s[a]?s["*"]:s[a];if(!l(e,t,n,r,a,i,o))return!1},!0)},subsetComparesType:function(e,t,n,r,i,s,o){if("function"==typeof s){var l=s(e,t,n,r,i,o);return"boolean"==typeof l?l:l&&"object"==typeof l?(l.getSubset&&-1===a.indexOf.call(o.getSubsets,l.getSubset)&&o.getSubsets.push(l.getSubset),l.intersection===a.ignoreType||l.difference===a.ignoreType||"intersection"in l&&!("difference"in l)&&"intersection"in s(t,e,r,n,i,o)):l}},properSupersetObject:function(e,t,n,r,s,o,u){var c=typeof t,d=!1;if("object"===c||"function"===c){var p=i({},e);!1===u.deep&&(u.deep=-1);for(var f in t){var h=void 0===o[f]?o["*"]:o[f],g=l(e[f],t[f],e,t,f,h,u);if(g===a.ignoreType);else if(f in e&&!u.performedDifference){if(!g)return!1}else d=!0;delete p[f]}for(f in p)if(void 0===o[f]||!l(e[f],void 0,e,t,f,o[f],u))return!1;return d}},properSubsetComparesType:function(e,t,n,r,a,i,s){if("function"==typeof i){var o=i(e,t,n,r,a,s);if("boolean"==typeof o)return o;if(o&&"object"==typeof o){if("intersection"in o&&!("difference"in o)){var l=i(t,e,r,n,a,s);return"intersection"in l&&"difference"in l}return!1}return o}},difference:function(e,t,n,a,i,s,o){o.result={},o.performedDifference=0,o.checks=[r.differenceComparesType,c(r.equalBasicTypes),c(r.equalArrayLike),c(r.properSupersetObject)],o.default=!0;var u=l(e,t,n,a,i,s,o);return!0===u&&o.performedDifference?o.result:u},differenceComparesType:function(e,t,n,i,s,o,l){if("function"==typeof o){var u=o(e,t,n,i,s,l);if("boolean"==typeof u)return!0===u?(l.result[s]=e,!0):u;if(u&&"object"==typeof u){if("difference"in u)return u.difference===a.ignoreType?a.ignoreType:null==u.difference||(l.result[s]=u.difference,l.performedDifference++,!0);if(!r.equalComparesType.apply(this,arguments))return!1;l.performedDifference++,l.result[s]=u.union}}},union:function(e,t,n,a,i,s,o){return o.result={},o.performedUnion=0,o.checks=[r.unionComparesType,c(r.equalBasicTypes),c(r.unionArrayLike),d(r.unionObject)],o.getUnions=[],o.default=!1,!0===l(e,t,n,a,i,s,o)&&o.result},unionComparesType:function(e,t,n,r,i,s,o){if("function"==typeof s){var l=s(e,t,n,r,i,o);if("boolean"==typeof l)return!0===l?(o.result[i]=e,!0):l;if(l&&"object"==typeof l&&(l.getUnion&&-1===a.indexOf.call(o.getUnions,l.getUnion)&&o.getUnions.push(l.getUnion),"union"in l))return l.union===a.ignoreType?l.union:(void 0!==l.union&&(o.result[i]=l.union),o.performedUnion++,!0)}},unionObject:function(e,t,n,r,i,s,o){var u=function(e,t,n,r,a){var i=void 0===s[a]?s["*"]:s[a];if(!l(e,t,n,r,a,i,o)){var u;return a in n||(u="subsetB"),a in r||(u="subsetA"),!!u&&(o.subset||(o.subset=u),o.subset===u&&void 0)}},c=typeof e;if("object"===c||"function"===c)return a.eachInUnique(e,u,t,u,!0)},unionArrayLike:function(e,t,n,i,s,l,u){if(Array.isArray(e)&&Array.isArray(t)){var c=o(e).concat(o(t));return a.doubleLoop(c,function(e,t,a,s){return!r.equal(a,e,n,i,void 0,l["*"],{default:!1})}),u.result[s]=c,!0}},count:function(e,t,n,a,i,s,o){return o.checks=[r.countComparesType,r.equalBasicTypes,r.equalArrayLike,r.loopObject],o.default=!1,l(e,t,n,a,i,s,o),"number"==typeof o.count?o.count:1/0},countComparesType:function(e,t,n,r,a,i,s){if("function"==typeof i){var o=i(e,t,n,r,a,s);if("boolean"==typeof o)return!0;if(o&&"object"==typeof o)return"number"==typeof o.count&&("count"in s&&o.count!==s.count?s.count=1/0:s.count=o.count),!0}},loopObject:function(e,t,n,r,a,i,o){var u=typeof e;if("object"===u||"function"===u)return s(e,function(n,r){var a=void 0===i[r]?i["*"]:i[r];l(n,t[r],e,t,r,a,o)}),!0},intersection:function(e,t,n,a,i,s,o){return o.result={},o.performedIntersection=0,o.checks=[r.intersectionComparesType,c(r.equalBasicTypes),c(r.intersectionArrayLike),d(r.intersectionObject)],o.default=!1,!0===l(e,t,n,a,i,s,o)&&o.result},intersectionComparesType:function(e,t,n,r,a,i,s){if("function"==typeof i){var o=i(e,t,n,r,a,s);if("boolean"==typeof o)return!0===o?(s.result[a]=e,!0):o;if(o&&"object"==typeof o&&"intersection"in o)return void 0!==o.intersection&&(s.result[a]=o.intersection),s.performedIntersection++,!0}},intersectionObject:function(e,t,n,r,i,s,o){var c=function(e,t,n,r,a){var i=void 0===s[a]?s["*"]:s[a];if(!l(e,t,n,r,a,i,o))return u(e,t,n,r,a,0,o)},d=typeof e;if("object"===d||"function"===d)return a.eachInUnique(e,c,t,c,!0)},intersectionArrayLike:function(e,t,n,a,i,l,u){if(Array.isArray(e)&&Array.isArray(t)){var c=[];return s(o(e),function(e){for(var i=0;i<t.length;i++)if(r.equal(e,t[i],n,a,void 0,l["*"],{default:!1})){c.push(e);break}}),u.result[i]=c,!0}}}}),define("can-set@1.5.2#src/get",["require","exports","module","./compare","./helpers","can-util/js/each/each"],function(e,t,n){var r=e("./compare"),a=e("./helpers"),i=e("can-util/js/each/each"),s=function(e,t,n){return a.filter.call(e,function(e){return r.subset(e,t,void 0,void 0,void 0,n,{})})};n.exports={subsetData:function(e,t,n,o){var l=o.getClauseProperties(e),u=o.getClauseProperties(t),c={},d=s(n,l.where,o.clauses.where);if(d.length&&(l.enabled.order||u.enabled.order)){c={};var p=a.firstProp(l.order),f=o.clauses.order[p];d=d.sort(function(t,n){return f(e[p],t,n)})}return d.length&&(l.enabled.paginate||u.enabled.paginate)&&(c={},r.subset(l.paginate,u.paginate,void 0,void 0,void 0,o.clauses.paginate,c),i(c.getSubsets,function(n){d=n(e,t,d,o,c)})),d}}}),define("can-set@1.5.2#src/set-core",["require","exports","module","./helpers","./clause","./compare","./get","can-assign","can-util/js/each/each","can-util/js/make-array/make-array","can-util/js/is-empty-object/is-empty-object","can-util/js/get/get"],function(e,t,n){function r(e,t,n){var r,a={};return"undefined"!=typeof Set&&(r=new Set),e.forEach(function(e){var t=a;r&&r.add(e),c(n.clauses.id,function(n){var r=f(e,n);t=t&&void 0!==r?t[r]=t[r]||{}:void 0})}),e.concat(t.filter(function(t){var i=a;return!(r&&r.has(t)||!r&&e.indexOf(t)>-1||(c(n.clauses.id,function(e){i=i&&i[f(t,e)]}),i!==a&&i))}))}function a(e,t){if("string"==typeof t){var n=t;t={fromSet:function(e,t){return e[n]||{}},toSet:function(e,t){return e[n]=t,e}}}this.clause=e,u(this,t)}var i=e("./helpers"),s=e("./clause"),o=e("./compare"),l=e("./get"),u=e("can-assign"),c=e("can-util/js/each/each"),d=e("can-util/js/make-array/make-array"),p=e("can-util/js/is-empty-object/is-empty-object"),f=e("can-util/js/get/get"),h=function(){var e=this.clauses={where:{},order:{},paginate:{},id:{}};this.translators={where:new a("where",{fromSet:function(e,t){return t},toSet:function(e,t){return u(e,t)}})};var t=this;c(arguments,function(n){n&&(n instanceof a?t.translators[n.clause]=n:u(e[n.constructor.type||"where"],n))})};h.make=function(e,t){return e instanceof h?e:new h(e,t)},u(h.prototype,{getClauseProperties:function(e,t){t=t||{};var n=u({},e),r=this.clauses,a=["order","paginate","id"],s={enabled:{where:!0,order:!1,paginate:!1,id:!1}};return t.omitClauses&&(a=i.arrayUnionIntersectionDifference(a,t.omitClauses).difference),c(a,function(e){var t,a={};for(t in r[e])t in n&&(a[t]=n[t],"id"!==e&&delete n[t]);s[e]=a,s.enabled[e]=!p(a)}),s.where=t.isProperties?n:this.translators.where.fromSet(e,n),s},getDifferentClauseTypes:function(e,t){var n=this,r=[];return c(s.TYPES,function(a){n.evaluateOperator(o.equal,e[a],t[a],{isProperties:!0},{isProperties:!0})||r.push(a)}),r},updateSet:function(e,t,n,r){return n&&"object"==typeof n&&!1!==r?(e=this.translators[t]?this.translators.where.toSet(e,n):u(e,n),!0):!!n&&void 0===r&&void 0},evaluateOperator:function(e,t,n,r,a,i){r=r||{},a=a||{},i=u({evaluateWhere:e,evaluatePaginate:e,evaluateOrder:e,shouldEvaluatePaginate:function(e,t){return e.enabled.paginate||t.enabled.paginate},shouldEvaluateOrder:function(e,t){return e.enabled.order&&o.equal(e.order,t.order,void 0,void 0,void 0,{},{})}},i||{});var s,l=this.getClauseProperties(t,r),c=this.getClauseProperties(n,a),d={},p=i.evaluateWhere(l.where,c.where,void 0,void 0,void 0,this.clauses.where,{});return s=this.updateSet(d,"where",p,s),p&&i.shouldEvaluatePaginate(l,c)?(i.shouldEvaluateOrder(l,c)&&(p=i.evaluateOrder(l.order,c.order,void 0,void 0,void 0,{},{}),s=this.updateSet(d,"order",p,s)),p&&(p=i.evaluatePaginate(l.paginate,c.paginate,void 0,void 0,void 0,this.clauses.paginate,{}),s=this.updateSet(d,"paginate",p,s))):p&&i.shouldEvaluateOrder(l,c)&&(p=e(l.order,c.order,void 0,void 0,void 0,{},{}),s=this.updateSet(d,"order",p,s)),p&&s?d:p},equal:function(e,t){return this.evaluateOperator(o.equal,e,t)},subset:function(e,t){var n=this.getClauseProperties(e),r=this.getClauseProperties(t),a=!0;return r.enabled.paginate&&(n.enabled.order||r.enabled.order)&&(a=o.equal(n.order,r.order,void 0,void 0,void 0,{},{})),!!a&&this.evaluateOperator(o.subset,e,t)},properSubset:function(e,t){return this.subset(e,t)&&!this.equal(e,t)},difference:function(e,t){var n,r,a=this.getClauseProperties(e),i=this.getClauseProperties(t),s=this.getDifferentClauseTypes(a,i);if(s.length>2)r=!1;else if(2!==s.length||"where"===s[0]&&"id"===s[1])switch(n=s[0]){case void 0:case"order":r=!1;break;case"paginate":case"where":"object"==typeof(r=o.difference(a[n],i[n],void 0,void 0,void 0,this.clauses[n],{}))&&(this.translators[n]&&(r=this.translators[n].toSet({},r)),u(r,a.order),"paginate"===n?u(r,a.where):"id"===s[1]&&(r=o.difference(a.id,i.id,void 0,void 0,void 0,this.clauses.id,{})))}else r=!1;return r},union:function(e,t){return this.evaluateOperator(o.union,e,t)},intersection:function(e,t){return this.evaluateOperator(o.intersection,e,t)},count:function(e){return this.evaluateOperator(o.count,e,{})},has:function(e,t){return this.evaluateOperator(o.subset,t,e,{isProperties:!0},void 0,{shouldEvaluatePaginate:function(){return!1}})},index:function(e,t,n){var r,a,s=this.getClauseProperties(e),o=i.firstProp(s.order);return o?(r=this.clauses.order[o],a=e[o],i.index(function(e,t){return r(a,e,t)},t,n)):(o=i.firstProp(this.clauses.id))?(r=i.defaultSort,a=o,i.index(function(e,t){return r(a,e,t)},t,n)):void 0},getSubset:function(e,t,n){var r=this.getClauseProperties(e),a=this.getClauseProperties(t);if(this.subset(u({},r.where,r.paginate),u({},a.where,a.paginate)))return l.subsetData(e,t,n,this)},getUnion:function(e,t,n,a){var s,l=this.getClauseProperties(e),u=this.getClauseProperties(t),d=this;if(this.subset(e,t))return a;if(this.subset(t,e))return n;var p;if(l.enabled.paginate||u.enabled.paginate){if(s={},!o.union(l.paginate,u.paginate,void 0,void 0,void 0,this.clauses.paginate,s))return;c(s.getUnions,function(r){var i=r(e,t,n,a,d,s);n=i[0],a=i[1]}),p=r(n,a,this)}else p=r(n,a,this);if(p.length&&l.enabled.order&&o.equal(l.order,u.order,void 0,void 0,void 0,{},{})){s={};var f=i.firstProp(l.order),h=d.clauses.order[f];p=p.sort(function(t,n){return h(e[f],t,n)})}return p},id:function(e){var t=Object.keys(this.clauses.id);if(1===t.length)return e[t[0]];var n={};return t.forEach(function(t){n[t]=e[t]}),JSON.stringify(n)}});var g=function(e,t){return function(){var n=d(arguments).slice(0,t),r=h.make(arguments[t]);return r[e].apply(r,n)}};n.exports={Algebra:h,Translate:a,difference:g("difference",2),equal:g("equal",2),subset:g("subset",2),properSubset:g("properSubset",2),union:g("union",2),intersection:g("intersection",2),count:g("count",1),has:g("has",2),index:g("index",3),getSubset:g("getSubset",3),getUnion:g("getUnion",4)}}),define("can-set@1.5.2#src/props",["require","exports","module","./helpers","./clause","can-util/js/each/each"],function(e,t,n){var r=e("./helpers"),a=e("./clause"),i=e("can-util/js/each/each"),s=function(e,t){return e>=t[0]&&e<=t[1]},o=function(e,t,n,r){return{sAv1:+e[n],sAv2:+e[r],sBv1:+t[n],sBv2:+t[r]}},l=function(e,t,n,r){var a=o(e,t,n,r),i=a.sAv1,l=a.sAv2,u=a.sBv1,c=a.sBv2,d=l-i+1,p={difference:[c+1,l],intersection:[i,c],union:[u,l],count:d,meta:"after"},f={difference:[i,u-1],intersection:[u,l],union:[i,c],count:d,meta:"before"};return i===u&&l===c?{intersection:[i,l],union:[i,l],count:d,meta:"equal"}:i===u&&c<l?p:l===c&&u>i?f:s(i,[u,c])&&s(l,[u,c])?{intersection:[i,l],union:[u,c],count:d,meta:"subset"}:s(u,[i,l])&&s(c,[i,l])?{intersection:[u,c],difference:[null,null],union:[i,l],count:d,meta:"superset"}:i<u&&s(l,[u,c])?f:u<i&&s(c,[i,l])?p:l===u-1?{difference:[i,l],union:[i,c],count:d,meta:"disjoint-before"}:c===i-1?{difference:[i,l],union:[u,l],count:d,meta:"disjoint-after"}:isNaN(d)?void 0:{count:d,meta:"disjoint"}},u=function(e,t){return e?(Array.isArray(e)||(e=[e]),e.length?e:t):t},c={0:!1,false:!1,null:void 0,undefined:void 0},d=function(e){return"string"==typeof e?!(e.toLowerCase()in c)||c[e.toLowerCase()]:e},p={enum:function(e,t){var n=new a.Where({});return n[e]=function(e,n,a,s){e=u(e,t),n=u(n,t);var o=r.arrayUnionIntersectionDifference(e,n);return o.difference.length||delete o.difference,i(o,function(e,n){Array.isArray(e)&&(r.arraySame(t,e)?o[n]=void 0:1===e.length&&(o[n]=e[0]))}),o},n},paginate:function(e,t,n,r){var s={},u=function(n,a){var s={};return i(["intersection","difference","union"],function(i){if(n[i]){var o={start:n[i][0],end:n[i][1]};s[i]=r(o)[0===a?e:t]}}),n.count&&(s.count=n.count),s};return s[e]=function(e,t,r,a){if(void 0!==e){var i=l(n(r),n(a),"start","end"),s=u(i,0);return s.getSubset=function(e,t,n,r,a){return n},s.getUnion=function(e,t,n,r,a,i){return[n,r]},s}},s[t]=function(e,t,r,a){if(void 0!==e){var i=l(n(r),n(a),"start","end"),s=u(i,1);return s.getSubset=function(e,t,r,a,i){var s=n(e),l=n(t),u=o(s,l,"start","end"),c=u.sAv1,d=u.sAv2,p=u.sBv1;return"end"in l&&"end"in s?r.slice(c-p,d-p+1):r.slice(c,d+1)},s.getUnion=function(e,t,r,a,s,o){var l=n(e),u=n(t);return i.meta.indexOf("after")>=0?(i.intersection&&(a=a.slice(0,i.intersection[0]-+u.start)),[a,r]):(i.intersection&&(r=r.slice(0,i.intersection[0]-+l.start)),[r,a])},s}},new a.Paginate(s)},boolean:function(e){var t=new a.Where({});return t[e]=function(e,t){var n=!(e=d(e));return e===!(t=d(t))&&t===n?{difference:!t,union:void 0}:void 0===e?{difference:!t,intersection:t,union:void 0}:e===t||void 0},t},sort:function(e,t){t||(t=r.defaultSort);var n={};return n[e]=t,new a.Order(n)},id:function(e){var t={};return t[e]=e,new a.Id(t)}},f=function(e,t,n){for(var r in t)n[r]||(e[r]=t[r]);return e},h=function(e,t,n){var r=f({},e,{start:1,end:1});return"start"in e&&(r[t]=e.start),"end"in e&&(r[n]=e.end-e.start+1),r},g=function(e,t,n){var r={};r[t]=r[n]=1;var a=f({},e,r);return t in e&&(a.start=parseInt(e[t],10)),n in e&&(a.end=a.start+parseInt(e[n])-1),a};p.offsetLimit=function(e,t){return e=e||"offset",t=t||"limit",p.paginate(e,t,function(n){return g(n,e,t)},function(n){return h(n,e,t)})},p.rangeInclusive=function(e,t){return e=e||"start",t=t||"end",p.paginate(e,t,function(n){var r={};r[e]=r[t]=1;var a=f({},n,r);return e in n&&(a.start=n[e]),t in n&&(a.end=n[t]),a},function(n){var r=f({},n,{start:1,end:1});return r[e]=n.start,r[t]=n.end,r})};var v=function(e,t){if(void 0!==e)return 1===t.length?e[t[0]]:v(e[t[0]],t.slice(1))};p.dotNotation=function(e){var t=new a.Where({});return t[e]=function(e,t,n,r,a){return void 0===e&&(e=v(n,a.split("."))),void 0===t&&(t=v(r,a.split("."))),e===t},t},n.exports=p}),define("can-set@1.5.2#src/set",["require","exports","module","./set-core","can-namespace","./props","./clause","./helpers"],function(e,t,n){var r=e("./set-core"),a=e("can-namespace"),i=e("./props"),s=e("./clause");r.comparators=i,r.props=i,r.helpers=e("./helpers"),r.clause=s,n.exports=a.set=r}),define("can-util@3.11.5#js/log/log",["require","exports","module","can-log"],function(e,t,n){"use strict";n.exports=e("can-log")}),define("can-connect@2.0.4#connect",["require","exports","module","can-util/js/assign/assign"],function(e,t,n){var r=e("can-util/js/assign/assign"),a=function(e,t){(e=e.map(function(e,t){var n=-1;return"string"==typeof e?(n=a.order.indexOf(e),e=i[e]):e.isBehavior?n=a.order.indexOf(e.behaviorName):e=a.behavior(e),{originalIndex:t,sortedIndex:n,behavior:e}})).sort(function(e,t){return~e.sortedIndex&&~t.sortedIndex?e.sortedIndex-t.sortedIndex:e.originalIndex-t.originalIndex}),e=e.map(function(e){return e.behavior});var n=a.base(a.behavior("options",function(){return t})());return e.forEach(function(e){n=e(n)}),n.init&&n.init(),n};a.order=["data/localstorage-cache","data/url","data/parse","cache-requests","data/combine-requests","constructor","constructor/store","can/map","can/ref","fall-through-cache","data/worker","real-time","data/callbacks-cache","data/callbacks","constructor/callbacks-once"],a.behavior=function(e,t){"string"!=typeof e&&(t=e,e=void 0);var n=function(n){var a=function(){};a.name=e,a.prototype=n;var i=new a,s="function"==typeof t?t.apply(i,arguments):t;return r(i,s),i.__behaviorName=e,i};return e&&(n.behaviorName=e,i[e]=n),n.isBehavior=!0,n};var i={};n.exports=a}),define("can-connect@2.0.4#base/base",["require","exports","module","can-connect/connect"],function(e,t,n){var r=e("can-connect/connect");n.exports=r.behavior("base",function(e){return{id:function(e){var t=[],n=this.algebra;if(n&&n.clauses&&n.clauses.id)for(var r in n.clauses.id)t.push(e[r]);return this.idProp&&!t.length&&t.push(e[this.idProp]),t.length||t.push(e.id),t.length>1?t.join("@|@"):t[0]},idProp:e.idProp||"id",listSet:function(e){return e[this.listSetProp]},listSetProp:"__listSet",init:function(){}}})}),define("can-connect@2.0.4#can-connect",["require","exports","module","can-connect/connect","can-connect/base/base","can-namespace"],function(e,t,n){var r=e("can-connect/connect"),a=e("can-connect/base/base"),i=e("can-namespace");r.base=a,n.exports=i.connect=r}),define("can-fixture@2.0.3#helpers/getid",function(e,t,n){n.exports=function(e,t){var n=e.data.id;return void 0===n&&"number"==typeof e.data&&(n=e.data),void 0===n&&e.url.replace(/\/(\d+)(\/|$|\.)/g,function(e,t){n=t}),void 0===n&&(n=e.url.replace(/\/(\w+)(\/|$|\.)/g,function(e,t){"update"!==t&&(n=t)})),void 0===n&&(n=Math.round(1e3*Math.random())),n}}),define("can-fixture@2.0.3#helpers/legacyStore",["require","exports","module","./getid","can-set","can-util/js/is-array-like/is-array-like","can-util/js/each/each","can-util/js/assign/assign"],function(e,t,n){function r(e){var t=0;return o(e,function(e){"number"==typeof e.id&&(t=Math.max(t,e.id+1))}),t}var a=e("./getid"),i=e("can-set"),s=e("can-util/js/is-array-like/is-array-like"),o=e("can-util/js/each/each"),l=e("can-util/js/assign/assign");n.exports=function(e,t,n){var u,c,d,p=function(){return u++},f=function(e){for(var t=0;t<c.length;t++)if(e==c[t].id)return c[t]},h={};if(s(e)&&"string"==typeof e[0]?(e=t,t=n,n=arguments[3]):"string"==typeof e&&(e=t,t=n,n=arguments[3]),"number"==typeof e)u=0,c=[],d=function(){c=[];for(var n=0;n<e;n++){var r=t(n,c);r.id||(r.id=p()),c.push(r)}};else{n=t;var g=e;u=r(g),d=function(){c=g.slice(0)}}return l(h,{getListData:function(e){e=e||{};var t=c.slice(0);e.data=e.data||{},o((e.data.order||[]).slice(0).reverse(),function(e){var n=e.split(" ");t=t.sort(function(e,t){return"ASC"!==n[1].toUpperCase()?e[n[0]]<t[n[0]]?1:e[n[0]]===t[n[0]]?0:-1:e[n[0]]<t[n[0]]?-1:e[n[0]]===t[n[0]]?0:1})}),o((e.data.group||[]).slice(0).reverse(),function(e){var n=e.split(" ");t=t.sort(function(e,t){return e[n[0]]>t[n[0]]})});var r=parseInt(e.data.offset,10)||0,a=parseInt(e.data.limit,10)||c.length-r,s=0;for(var l in e.data)if(s=0,void 0!==e.data[l]&&(-1!==l.indexOf("Id")||-1!==l.indexOf("_id")))for(;s<t.length;)e.data[l]!=t[s][l]?t.splice(s,1):s++;if("function"==typeof n)for(s=0;s<t.length;)n(t[s],e)?s++:t.splice(s,1);else if("object"==typeof n)for(s=0;s<t.length;)i.subset(t[s],e.data,n)?s++:t.splice(s,1);var u={count:t.length,data:t.slice(r,r+a)};return o(["limit","offset"],function(t){t in e.data&&(u[t]=e.data[t])}),u},getData:function(e,t){var n=f(a(e));if(void 0===n)return t(404,"Requested resource not found");t(n)},updateData:function(e,t){var n=a(e),r=f(n);if(void 0===r)return t(404,"Requested resource not found");l(r,e.data),t({id:n},{location:e.url||"/"+a(e)})},destroyData:function(e,t){var n=a(e);if(void 0===f(n))return t(404,"Requested resource not found");for(var r=0;r<c.length;r++)if(c[r].id==n){c.splice(r,1);break}return{}},createData:function(e,n){var r="function"==typeof t?t(c.length,c):{};l(r,e.data),r.id||(r.id=p()),c.push(r),n({id:r.id},{location:e.url+"/"+r.id})}}),d(),l({findAll:h.getListData,findOne:h.getData,create:h.createData,update:h.updateData,destroy:h.destroyData,getId:a,find:function(e){return f(a(e))},reset:d},h)}}),define("can-connect@2.0.4#helpers/get-items",function(e,t,n){n.exports=function(e){return Array.isArray(e)?e:e.data}}),define("can-connect@2.0.4#helpers/sorted-set-json",function(e,t,n){var r=[].forEach,a=Object.keys;n.exports=function(e){if(null==e)return e;var t={};return r.call(a(e).sort(),function(n){t[n]=e[n]}),JSON.stringify(t)}}),define("can-connect@2.0.4#helpers/overwrite",function(e,t,n){n.exports=function(e,t,n){for(var r in e)!e.hasOwnProperty(r)||"__"===r.substr(0,2)||r===n||r in t||delete e[r];for(r in t)e[r]=t[r];return e}}),define("can-connect@2.0.4#helpers/set-add",["require","exports","module","can-set"],function(e,t,n){var r=e("can-set");n.exports=function(e,t,n,a,i){var s=r.index(t,n,a,i);void 0===s&&(s=n.length);var o=n.slice(0);return o.splice(s,0,a),o}}),define("can-connect@2.0.4#helpers/get-index-by-id",function(e,t,n){n.exports=function(e,t,n){for(var r=e.id(t),a=0;a<n.length;a++)if(r==e.id(n[a]))return a;return-1}}),define("can-connect@2.0.4#helpers/clone-data",["require","exports","module","can-util/js/deep-assign/deep-assign"],function(e,t,n){var r=e("can-util/js/deep-assign/deep-assign");n.exports=function(e){return Array.isArray(e)?e.slice(0):r({},e)}}),define("can-connect@2.0.4#data/memory-cache/memory-cache",["require","exports","module","can-connect/helpers/get-items","can-connect","can-connect/helpers/sorted-set-json","can-set","can-connect/helpers/overwrite","can-connect/helpers/set-add","can-connect/helpers/get-index-by-id","can-util/js/assign/assign","can-connect/helpers/clone-data"],function(e,t,n){var r=e("can-connect/helpers/get-items"),a=e("can-connect"),i=e("can-connect/helpers/sorted-set-json"),s=e("can-set"),o=e("can-connect/helpers/overwrite"),l=e("can-connect/helpers/set-add"),u=e("can-connect/helpers/get-index-by-id"),c=e("can-util/js/assign/assign"),d=e("can-connect/helpers/clone-data");n.exports=a.behavior("data/memory-cache",function(e){return{_sets:{},getSetData:function(){return this._sets},__getListData:function(e){var t=this.getSetData()[i(e)];if(t)return t.items},_instances:{},getInstance:function(e){return this._instances[e]},removeSet:function(e,t){delete this.getSetData()[e],!0!==t&&this.updateSets()},updateSets:function(){},updateInstance:function(e){var t=this.id(e);return t in this._instances?o(this._instances[t],e,this.idProp):this._instances[t]=e,this._instances[t]},updateSet:function(e,t,n){var r=n?i(n):e.setKey;if(n&&r!==e.setKey){var a=this.getSetData(),s=e.setKey;a[r]=e,e.setKey=r,e.set=c({},n),this.removeSet(s)}e.items=t;var o=this;t.forEach(function(e){o.updateInstance(e)})},addSet:function(e,t){var n=r(t),a=this.getSetData(),s=i(e);a[s]={setKey:s,items:n,set:c({},e)};var o=this;n.forEach(function(e){o.updateInstance(e)}),this.updateSets()},_eachSet:function(e){var t=this.getSetData(),n=this;for(var r in t){var a=function(t,r){return e.call(n,t,r,function(){return t.items})}(t[r],r);if(void 0!==a)return a}},_getSets:function(){var e=[],t=this.getSetData();for(var n in t)e.push(t[n].set);return e},getSets:function(){return Promise.resolve(this._getSets())},clear:function(){this._instances={},this._sets={}},getListData:function(e){e=e||{};var t=this.getListDataSync(e);return t?Promise.resolve(t):Promise.reject({message:"no data",error:404})},getListDataSync:function(e){for(var t=this._getSets(),n=0;n<t.length;n++){var r=t[n];if(s.subset(e,r,this.algebra)){var a=this.__getListData(r);return{data:s.getSubset(e,r,a,this.algebra),count:a.length}}}},_getListData:function(e){return this.getListDataSync(e)},updateListData:function(e,t){t=t||{};var n=d(e),a=r(n),i=this.getSetData(),o=this;for(var l in i){var u=i[l],p=s.union(u.set,t,this.algebra);if(p){var f=c({},u.set);return this.getListData(f).then(function(e){o.updateSet(u,s.getUnion(f,t,r(e),a,o.algebra),p)})}}return this.addSet(t,n),Promise.resolve()},getData:function(e){var t=this.id(e),n=this.getInstance(t);return n?Promise.resolve(n):Promise.reject({message:"no data",error:404})},createData:function(e){var t=this,n=this.updateInstance(e);return this._eachSet(function(e,r,a){s.has(e.set,n,this.algebra)&&t.updateSet(e,l(t,e.set,a(),n,t.algebra),e.set)}),Promise.resolve(c({},n))},updateData:function(e){var t=this,n=this.updateInstance(e);return this._eachSet(function(e,r,a){var i=a(),o=u(t,n,i);s.subset(n,e.set,this.algebra)?-1===o?t.updateSet(e,l(t,e.set,a(),n,t.algebra)):(i.splice(o,1,n),t.updateSet(e,i)):-1!==o&&(i.splice(o,1),t.updateSet(e,i))}),Promise.resolve(c({},n))},destroyData:function(e){var t=this;this._eachSet(function(n,r,a){var i=a(),s=u(t,e,i);-1!==s&&(i.splice(s,1),t.updateSet(n,i))});var n=this.id(e);return delete this._instances[n],Promise.resolve(c({},e))}}})}),define("can-fixture@2.0.3#store",["require","exports","module","can-set","can-connect","./helpers/legacyStore","can-util/js/each/each","can-util/js/assign/assign","can-util/js/is-array-like/is-array-like","can-connect/data/memory-cache/memory-cache"],function(e,t,n){var r=e("can-set"),a=e("can-connect"),i=e("./helpers/legacyStore"),s=e("can-util/js/each/each"),o=e("can-util/js/assign/assign"),l=e("can-util/js/is-array-like/is-array-like"),u=e("can-connect/data/memory-cache/memory-cache"),c=function(e){for(var t in e)return t},d=function(e){return function(t,n){this.connection[e](t.data).then(function(e){n(e)},function(e){n(403,e)})}},p=function(e,t){return function(){var n=[],r=0;return s(e,function(e){n.push(JSON.parse(JSON.stringify(e))),r=Math.max(e[t]+1,r+1)||n.length}),{maxId:r,items:n}}},f=function(e,t,n){this.connection=e,this.makeItems=t,this.idProp=n,this.reset();for(var r in f.prototype)this[r]=this[r].bind(this)};o(f.prototype,{getListData:d("getListData"),getData:d("getData"),createData:function(e,t){var n=this.idProp;e.data[n]=++this.maxId,this.connection.createData(e.data).then(function(r){var a={};a[n]=e.data[n],t(a)},function(e){t(403,e)})},updateData:d("updateData"),destroyData:d("destroyData"),reset:function(e){e&&(this.makeItems=p(e,this.idProp));var t=this.makeItems();this.maxId=t.maxId,this.connection.addSet({},{data:t.items})},get:function(e){var t=this.connection.id(e);return this.connection.getInstance(t)},getList:function(e){return this.connection._getListData(e)}}),s({findAll:"getListData",findOne:"getData",create:"createData",update:"updateData",destroy:"destroyData"},function(e,t){f.prototype[t]=function(){return this[e].apply(this,arguments)}}),f.make=function(e,t,n){var s=!1;if((e instanceof r.Algebra||t instanceof r.Algebra||n instanceof r.Algebra)&&(s=!0),!s)return console.warn("can-fixture: This form ( `fixture(count, make, filter)` ) of making a store is deprecated.  Please use the algebra-based form."),i.apply(this,arguments);var o,d;"number"==typeof e?(d=c(n.clauses.id||{})||"id",o=function(){for(var n=[],r=0,a=0;a<e;a++){var i=t(a,n);i[d]||(i[d]=a),r=Math.max(i[d]+1,r+1)||n.length,n.push(i)}return{maxId:r,items:n}}):l(e)&&(d=c((n=t).clauses.id||{})||"id",o=p(e,d));var h=a([u],{algebra:n,idProp:d});return new f(h,o,d)},n.exports=f}),define("can-fixture@2.0.3#core",["require","exports","module","can-set","can-util/js/string/string","can-util/js/each/each","can-util/js/assign/assign","can-util/js/is-empty-object/is-empty-object","can-util/js/is-plain-object/is-plain-object","can-util/js/log/log","can-util/js/dev/dev","./store"],function(e,t,n){function r(e){return e&&(e.getData||e.getListData)}function a(e){var t=e.match(/(GET|POST|PUT|DELETE|PATCH) (.+)/i);return t?[t[1],t[2]]:[void 0,e]}function i(e){var t=/\{(.*)\}/,n=e.match(t);if(n&&2===n.length)return n[1]}function s(e,t){if(!(t=t||i(e)))return[void 0,e];var n=new RegExp("\\/\\{"+t+"\\}.*"),r=n.test(e),a=r?e.replace(n,""):e;return[r?e:e.trim()+"/{"+t+"}",a]}function o(e,t){var n={},r=a(e),i=r[0],o=s(r[1],t.idProp),l=o[0],u=o[1];if(i){var c=['fixture("'+e+'", fixture) must use a store method, not a store directly.'];if(l){var d=k.item[i];if(d){n[i+" "+l]=t[d];var p='Replace with fixture("'+i+" "+l+'", fixture.'+d+") for items.";c.push(p)}}var f=k.list[i];if(f){n[i+" "+u]=t[f];var h='Replace with fixture("'+i+" "+u+'", fixture.'+f+") for lists.";c.push(h)}var g=c.join(" ");m.warn(g)}else{var v=k.item;for(var y in v){var b=v[y];n[y+" "+l]=t[b]}var T=k.list;for(var x in T){var w=T[x];n[x+" "+u]=t[w]}}return n}function l(e){var t=a(e),n=t[0],r=t[1];return n?{type:n,url:r}:{url:r}}function u(e,n,r){var a=t.index(n,!0);if(a>-1&&y.splice(a,1),null!=r){if("object"==typeof r){var i=r;r=function(){return i}}n.fixture=r,y.unshift(n)}}var c=e("can-set"),d=e("can-util/js/string/string").sub,p=e("can-util/js/each/each"),f=e("can-util/js/assign/assign"),h=e("can-util/js/is-empty-object/is-empty-object"),g=e("can-util/js/is-plain-object/is-plain-object"),v=e("can-util/js/log/log"),m=e("can-util/js/dev/dev");e("./store");var y=[];t.fixtures=y;var k={item:{GET:"getData",PUT:"updateData",DELETE:"destroyData"},list:{GET:"getListData",POST:"createData"}};t.add=function(e,n){if(void 0!==n){if(r(n))return e=o(e,n),void t.add(e);"string"==typeof e&&(e=l(e)),u(0,e,n)}else p(e,function(e,n){t.add(n,e)})};var b=t.add;b.on=!0,b.delay=10,t.callDynamicFixture=function(e,n,r){e.data=n.data;var a=JSON.stringify(e.data);v.log(e.type.toUpperCase()+" "+e.url+" "+a.substr(0,50)+" -> handler(req,res)");var i=function(){var n=t.extractResponse.apply(e,arguments);return r.apply(this,n)},s=function(){var t=n.fixture(e,i,e.headers,n);void 0!==t&&i(200,t)};return e.async?setTimeout(s,b.delay):(s(),null)},t.index=function(e,n){for(var r=0;r<y.length;r++)if(t.matches(e,y[r],n))return r;return-1},t.get=function(e){if(b.on){var n=t.index(e,!0);-1===n&&(n=t.index(e,!1));var r=n>=0?f({},y[n]):void 0;if(r){var a=r.fixture,i=t.dataFromUrl(r.url,e.url);if("string"==typeof r.fixture)i&&(a=d(a,i)),r.url=a,r.data=null,r.type="GET",r.error||(r.error=function(e,t,n){throw"fixtures.js Error "+t+" "+n});else if(g(e.data)||null==e.data){var s=f({},e.data||{});r.data=f(s,i)}else r.data=e.data}return r}},t.matches=function(e,n,r){return r?c.equal(e,n,{fixture:function(){return!0}}):c.subset(e,n,t.defaultCompare)},t.defaultCompare={url:function(e,n){return!!t.dataFromUrl(n,e)},fixture:function(){return!0},xhr:function(){return!0},type:function(e,t){return t&&e?e.toLowerCase()===t.toLowerCase():t===e},method:function(e,t){return t&&e?e.toLowerCase()===t.toLowerCase():t===e},helpers:function(){return!0},headers:function(e,t){return!(null!=e||!h(t))||!(null!=t||!h(e))||c.equal(e,t)},data:function(e,t){return!(null!=e||!h(t))||!(null!=t||!h(e))||c.subset(e,t)}};var T=/\{([^\}]+)\}/g;t.dataFromUrl=function(e,t){if(!e)return{};var n=[],r=e.replace(".","\\.").replace("?","\\?"),a=new RegExp(r.replace(T,function(e,t){return n.push(t),"([^/]+)"})+"$").exec(t),i={};return a?(a.shift(),p(n,function(e){i[e]=a.shift()}),i):null},t.extractResponse=function(e,t,n,r){return"number"!=typeof e&&(n=t,t=e,e=200),"string"==typeof n&&(r=n,n={}),[e,t,n,r]}}),define("can-deparam@1.0.3#can-deparam",["require","exports","module","can-namespace"],function(e,t,n){var r=e("can-namespace"),a=/^\d+$/,i=/([^\[\]]+)|(\[\])/g,s=/([^?#]*)(#.*)?$/,o=/%([^0-9a-f][0-9a-f]|[0-9a-f][^0-9a-f]|[^0-9a-f][^0-9a-f])/i,l=function(e){e=e.replace(/\+/g," ");try{return decodeURIComponent(e)}catch(t){return decodeURIComponent(e.replace(o,function(e,t){return"%25"+t}))}};n.exports=r.deparam=function(e){var t,n={};return e&&s.test(e)&&e.split("&").forEach(function(e){var r=e.split("="),s=l(r.shift()),o=l(r.join("=")),u=n;if(s){for(var c=0,d=(r=s.match(i)).length-1;c<d;c++)u[r[c]]||(u[r[c]]=a.test(r[c+1])||"[]"===r[c+1]?[]:{}),u=u[r[c]];"[]"===(t=r.pop())?u.push(o):u[t]=o}}),n}}),define("can-fixture@2.0.3#xhr",["require","exports","module","./core","can-deparam","can-util/js/assign/assign","can-util/js/each/each","can-util/js/log/log"],function(e,t,n){!function(e,t,n,r){function a(e,t){for(var n=e.__events[t]||[],r=0,a=n.length;r<a;r++)n[r].call(e)}var i=t("./core"),s=t("can-deparam"),o=t("can-util/js/assign/assign"),l=t("can-util/js/each/each"),u=t("can-util/js/log/log"),c=XMLHttpRequest,d=void 0!==e?e:window,p=["type","url","async","response","responseText","responseType","responseXML","responseURL","status","statusText","readyState"],f=["abort","error","load","loadend","loadstart","progress","readystatechange"];!function(){var e=new c;for(var t in e)0===t.indexOf("on")?-1===f.indexOf(t.substr(2))&&f.push(t.substr(2)):-1===p.indexOf(t)&&"function"!=typeof e[t]&&p.push(t)}(),d.XMLHttpRequest=function(){var e=this,t=new c;this._xhr=t,this._requestHeaders={},this.__events={},l(f,function(n){t["on"+n]=function(){if(a(e,n),e["on"+n])return e["on"+n].apply(e,arguments)}}),this.onload=null},d.XMLHttpRequest._XHR=c,o(XMLHttpRequest.prototype,{setRequestHeader:function(e,t){this._requestHeaders[e]=t},open:function(e,t,n){this.type=e,this.url=t,this.async=!1!==n},getAllResponseHeaders:function(){return this._xhr.getAllResponseHeaders.apply(this._xhr,arguments)},addEventListener:function(e,t){(this.__events[e]=this.__events[e]||[]).push(t)},removeEventListener:function(e,t){var n=this.__events[e]=this.__events[e]||[],r=n.indexOf(t);r>=0&&n.splice(r,1)},setDisableHeaderCheck:function(e){this._disableHeaderCheck=!!e},getResponseHeader:function(e){return this._xhr.getResponseHeader(e)},abort:function(){var e=this._xhr;return void 0!==this.timeoutId&&(clearTimeout(this.timeoutId),e.open(this.type,this.url,!1!==this.async),e.send()),e.abort()},send:function(e){var t=this.type.toLowerCase()||"get",n={url:this.url,data:e,headers:this._requestHeaders,type:t,method:t,async:this.async,xhr:this};if((!n.data&&"get"===n.type||"delete"===n.type)&&(n.data=s(n.url.split("?")[1]),n.url=n.url.split("?")[0]),"string"==typeof n.data)try{n.data=JSON.parse(n.data)}catch(e){n.data=s(n.data)}var r=i.get(n),c=this;if(!r||"function"!=typeof r.fixture){var d=function(){return c._xhr.open(c._xhr.type,c._xhr.url,c._xhr.async),c._requestHeaders&&Object.keys(c._requestHeaders).forEach(function(e){c._xhr.setRequestHeader(e,c._requestHeaders[e])}),c._xhr.send(e)};return r&&"number"==typeof r.fixture?(u.log(n.url+" -> delay "+r.fixture+"ms"),void(this.timeoutId=setTimeout(d,r.fixture))):(r&&(u.log(n.url+" -> "+r.url),o(c,r)),d())}this.timeoutId=i.callDynamicFixture(n,r,function(e,t,n,r){t="string"==typeof t?t:JSON.stringify(t),c._xhr={open:function(){},send:function(){},abort:function(){},getResponseHeader:function(){}},o(c,{readyState:4,status:e}),e>=200&&e<300||304===e?o(c,{statusText:r||"OK",responseText:t}):o(c,{statusText:r||"error",responseText:t}),c.getAllResponseHeaders=function(){var e=[];return l(n||{},function(t,n){Array.prototype.push.apply(e,[n,": ",t,"\r\n"])}),e.join("")},c.onreadystatechange&&c.onreadystatechange({target:c}),a(c,"progress"),c.onprogress&&c.onprogress(),a(c,"load"),c.onload&&c.onload(),a(c,"loadend"),c.onloadend&&c.onloadend()})}}),l(p,function(e){Object.defineProperty(XMLHttpRequest.prototype,e,{get:function(){return this._xhr[e]},set:function(t){try{this._xhr[e]=t}catch(e){}}})})}(function(){return this}(),e)}),define("can-fixture@2.0.3#fixture",["require","exports","module","./core","./store","./xhr","can-util/js/assign/assign","can-namespace"],function(e,t,n){var r=e("./core"),a=r.add,i=e("./store");e("./xhr");var s=e("can-util/js/assign/assign"),o=e("can-namespace"),l=function(){};s(a,{rand:function e(t,n,r){if("number"==typeof t)return"number"==typeof n?t+Math.floor(Math.random()*(n-t+1)):Math.floor(Math.random()*(t+1));var a=t.slice(0);void 0===n?(n=1,r=a.length):void 0===r&&(r=n);for(var i=[],s=n+Math.round(e(r-n)),o=0;o<s;o++){var l=e(a.length-1),u=a.splice(l,1)[0];i.push(u)}return i},xhr:function(e){return s({},{abort:l,getAllResponseHeaders:function(){return""},getResponseHeader:function(){return""},open:l,overrideMimeType:l,readyState:4,responseText:"",responseXML:null,send:l,setRequestHeader:l,status:200,statusText:"OK"},e)},store:i.make,fixtures:r.fixtures}),"undefined"!=typeof window&&"function"!=typeof e.resolve&&(window.fixture=a),n.exports=o.fixture=a}),define("spectre-canjs@2.3.0#sp-form/demo/full/fixtures",["can-fixture"],function(e){"use strict";function t(e){var t=new FileReader;return t.readAsDataURL(e),t.onerror=function(e){console.log("Error: ",e)},t}var n=function(e){return e&&e.__esModule?e:{default:e}}(e);n.default.delay=2e3,(0,n.default)({method:"POST",url:"/upload"},function(e,n,r,a){try{var i=Array.from(e.data.entries()).filter(function(e){return"uri"===e[0]})[0][1],s=t(i);s.onload=function(){n({uri:s.result,id:i.name},{"content-type":"application/json"})}}catch(e){dev.warn(e)}}),(0,n.default)({method:"DELETE",url:"/upload/{id}"},function(e,t,n,r){console.warn(e),t({result:"success"})})}),define("spectre-canjs@2.3.0#sp-form/demo/full/full",["exports","./full.stache","json-pretty-html","flatpickr","can-define/map/","spectre-canjs/sp-form/sp-form","spectre-canjs/sp-form/fields/sp-text-field/","spectre-canjs/sp-form/fields/sp-select-field/","spectre-canjs/sp-form/fields/sp-dropzone-field/","spectre-canjs/sp-form/fields/sp-subform-field/","spectre-canjs/sp-form/fields/sp-check-field/","./full.less","flatpickr/dist/flatpickr.css","./fixtures.js"],function(e,t,n,r,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=(0,s.default)(p);document.body.appendChild(e)};var s=i(t),o=i(n),l=i(r),u=i(a),c=u.default.extend("ChildDemoObject",{json_field_1:"string",json_field_2:{validate:function(e){return 2!=e.value?"The value must be 2":void 0},default:2,editTag:"sp-select-field",defaultLabel:"These values are loading asynchronously!",optionsPromise:new Promise(function(e){setTimeout(function(){e([{value:1,label:"Option 1"},{value:2,label:"Option 2"}])},5e3)})},json_field_3:{type:"number",validate:function(e){var t=parseInt(e.value,10);return!t||t<10?"Please enter a value greater than 10":void 0}},json_field_4:{type:"boolean",editTag:"sp-check-field",style:"switch",serialize:function(e){return String(e)},validate:function(e){return console.log(e.value),e.value?"":"You must agree to these terms"}}}),d=u.default.extend("DemoObject",{field1:{type:"string",default:"Default Value",name:"field1",alias:"Please enter at least 50 characters",validate:function(e){return e.dirty.assign({field1Length:e.value?e.value.length:0}),e.value.length<50&&"This field must contain at least 50 characters"}},field2:{type:"string",name:"field2",alias:"A basic textarea field",textarea:!0,placeholder:"Enter the text: hello",validate:function(e){return"hello"!=e.value?'This field must contain the text, "hello"':""}},field3:{type:"number",default:1,name:"field3",alias:"A select dropdown",editTag:"sp-select-field",validate:function(e){if(1!=e.value)return"This field must be 1"},options:[{value:1,label:"Option 1"},{value:2,label:"Option 2"}]},field4:{type:"date",serialize:function(e){return e?e.toDateString():"Not set"},name:"field4",onInsert:function(e){(0,l.default)(e)},alias:"A date field",ui:"datepicker",placeholder:"Enter a date..."},field5:{name:"field5",alias:"A file field",editTag:"sp-dropzone-field",url:"/upload",serialize:function(e){return e?e.map(function(e){return e.id}).join(","):""}},field6:{Type:c,name:"field6",alias:"A Subform Field",editTag:"sp-subform-field",Default:c,ObjectTemplate:c},field1Length:{edit:!1,type:"number"},field7:{type:"boolean",name:"field7",alias:"A checkbox",editTag:"sp-check-field",default:!1},cascade_1:{type:"string",name:"cascade_1",alias:"Car Make - (cascade dropdown 1)",defaultLabel:"First choose a make...",options:[{value:"Ford"},{value:"Chevy"},{value:"Toyota"}],editTag:"sp-select-field"},cascade_2:{type:"string",name:"cascade_2",alias:"Car Model - (cascade dropdown 2)",defaultLabel:"Then choose a model...",getOptions:function(e){return{Ford:[{value:"Fiesta"},{value:"Focus"},{value:"Taurus"}],Chevy:[{value:"Spark"},{value:"Sonic"},{value:"Bolt"}],Toyota:[{value:"Prius"},{value:"Corolla"},{value:"Camry"}]}[e.cascade_1]||[{value:"None",label:"Choose a make first..."}]},validate:function(e){if(!e.dirty.cascade_1)return"You need to choose a make first"},editTag:"sp-select-field"}}),p=new u.default({object:new d,formSaving:!1,onSubmit:function(){var e=this;console.log(this.object),console.log("submitted data: ",this.object.serialize()),alert("Form submitted! See the console for details"),setTimeout(function(){e.formSaving=!1},3e3)},onCancel:function(){console.log("Form canceled!")},stringify:function(e){if(e)return(0,o.default)(e.serialize())}})});
//# sourceMappingURL=full.js.map